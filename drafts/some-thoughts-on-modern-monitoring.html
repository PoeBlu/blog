<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns# fb: https://www.facebook.com/2008/fbml">
<head>
    <title>Some Thoughts on Modern Monitoring - Jason Antman's Blog</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">



<link rel="canonical" href="https://blog.jasonantman.com/drafts/some-thoughts-on-modern-monitoring.html">

        <meta name="author" content="Jason Antman" />
        <meta name="keywords" content="monitoring,nagios,icinga,alerting,graphing,trending,notifications" />
        <meta name="description" content="Some thoughts on the state of monitoring and what we need." />

        <meta property="og:site_name" content="Jason Antman's Blog" />
        <meta property="og:type" content="article"/>
        <meta property="og:title" content="Some Thoughts on Modern Monitoring"/>
        <meta property="og:url" content="https://blog.jasonantman.com/drafts/some-thoughts-on-modern-monitoring.html"/>
        <meta property="og:description" content="Some thoughts on the state of monitoring and what we need."/>
        <meta property="article:published_time" content="2015-05-03" />
            <meta property="article:section" content="Monitoring" />
            <meta property="article:tag" content="monitoring" />
            <meta property="article:tag" content="nagios" />
            <meta property="article:tag" content="icinga" />
            <meta property="article:tag" content="alerting" />
            <meta property="article:tag" content="graphing" />
            <meta property="article:tag" content="trending" />
            <meta property="article:tag" content="notifications" />
            <meta property="article:author" content="Jason Antman" />



    <!-- Bootstrap -->
        <link rel="stylesheet" href="https://blog.jasonantman.com/theme/css/bootstrap.flatly.min.css" type="text/css"/>
    <link href="https://blog.jasonantman.com/theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="https://blog.jasonantman.com/theme/css/pygments/default.css" rel="stylesheet">
        <link href="https://blog.jasonantman.com/theme/css/typogrify.css" rel="stylesheet">
    <link rel="stylesheet" href="https://blog.jasonantman.com/theme/css/style.css" type="text/css"/>
        <link href="https://blog.jasonantman.com/theme/css/shariff/shariff.min.css" rel="stylesheet">

    <link rel="stylesheet" href="https://blog.jasonantman.com/theme/css/forkongithub.min.css" type="text/css" />

        <link href="https://blog.jasonantman.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
              title="Jason Antman's Blog ATOM Feed"/>

        <link href="https://blog.jasonantman.com/feeds/all.rss.xml" type="application/rss+xml" rel="alternate"
              title="Jason Antman's Blog RSS Feed"/>


        <link href="https://blog.jasonantman.com/feeds/categories/monitoring.atom.xml" type="application/atom+xml" rel="alternate"
              title="Jason Antman's Blog Monitoring ATOM Feed"/>

</head>
<body>

<div class="navbar navbar-default navbar-fixed-top" role="navigation">
	<div class="container">
<span id="forkongithub"><a href="https://github.com/jantman/blog">Fork me on GitHub</a></span>        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="https://blog.jasonantman.com/" class="navbar-brand">
Jason Antman's Blog            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                         <li><a href="https://blog.jasonantman.com/pages/about.html">
                             About&nbsp;Me
                          </a></li>
                        <li >
                            <a href="https://blog.jasonantman.com/categories/ideas-and-rants/index.html">Ideas and rants</a>
                        </li>
                        <li >
                            <a href="https://blog.jasonantman.com/categories/miscellaneous/index.html">Miscellaneous</a>
                        </li>
                        <li class="active">
                            <a href="https://blog.jasonantman.com/categories/monitoring/index.html">Monitoring</a>
                        </li>
                        <li >
                            <a href="https://blog.jasonantman.com/categories/ops/index.html">Ops</a>
                        </li>
                        <li >
                            <a href="https://blog.jasonantman.com/categories/projects/index.html">Projects</a>
                        </li>
                        <li >
                            <a href="https://blog.jasonantman.com/categories/puppet/index.html">Puppet</a>
                        </li>
                        <li >
                            <a href="https://blog.jasonantman.com/categories/tech-howtos/index.html">Tech howtos</a>
                        </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
              <li><a href="https://blog.jasonantman.com/archives.html"><i class="fa fa-th-list"></i><span class="icon-label">Archives</span></a></li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->
<!-- Banner -->
<!-- End Banner -->
<div class="container">
    <div class="row">
        <div class="col-sm-9">
    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="https://blog.jasonantman.com/drafts/some-thoughts-on-modern-monitoring.html"
                       rel="bookmark"
                       title="Permalink to Some Thoughts on Modern Monitoring">
                        Some Thoughts on Modern&nbsp;Monitoring
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <span class="label label-default">Date</span>
    <span class="published">
        <i class="fa fa-calendar"></i><time datetime="2015-05-03T23:10:00-04:00"> Sun 03 May 2015</time>
    </span>





<span class="label label-default">Tags</span>
	<a href="https://blog.jasonantman.com/tags/monitoring/index.html">monitoring</a>
        /
	<a href="https://blog.jasonantman.com/tags/nagios/index.html">nagios</a>
        /
	<a href="https://blog.jasonantman.com/tags/icinga/index.html">icinga</a>
        /
	<a href="https://blog.jasonantman.com/tags/alerting/index.html">alerting</a>
        /
	<a href="https://blog.jasonantman.com/tags/graphing/index.html">graphing</a>
        /
	<a href="https://blog.jasonantman.com/tags/trending/index.html">trending</a>
        /
	<a href="https://blog.jasonantman.com/tags/notifications/index.html">notifications</a>
    
</footer><!-- /.post-info -->                    </div>
                </div>
                <p>Tools like Puppet, Chef and their ilk (Salt, Ansible, etc.) have done wonders for how systems are
managed and configured. But it seems that much of the monitoring space has been left behind. Sure,
services such as NewRelic, AppNeta, Sensu, etc. provide good solutions, or at least parts of solutions,
but it seems that the open source world has fallen far behind the&nbsp;times.</p>
<p>Nagios is the de-facto standard, but it still abides by a dated &#8220;everything is a machine, and every machine
is persistent&#8221; paradigm. It doesn&#8217;t play well with a highly dynamic, virtualized, autoscaling world. The fork
that I&#8217;ve run lately, Icinga, makes some improvements on the original by providing database-backed configurations
and an <span class="caps">API</span>, but that&#8217;s still at best a bolt-on fix. The open source world has done great things with log
collection and analysis (Logstash) and metric collection and display (Graphite and the many related projects),
but these focus on getting the data, not acting on it. Some interesting solutions have come out of companies
such as NetFlix (&lt;&lt;<links>&gt;&gt;), but they&#8217;re not really easily-usable general-purpose&nbsp;solutions.</p>
<p>So, what should monitoring in the new world look&nbsp;like?</p>
<ul>
<li>Not everything is a machine. We care as much about services and APIs as we do about hosts (probably more).
So, first off, the Nagios paradigm of hosts and services is dated. Firstly, it needs a higher-level container,
such as an Application, that describes a &#8220;thing&#8221; running across multiple hosts, comprised of multiple services.
There are some hacks to get Nagios to work this way (check-multi, anyone?) but there needs to be a real, high-level
object that understands concepts such as load balancer pools. Also, not every &#8220;thing&#8221; we want to monitor is a
network&nbsp;host.</li>
<li>We now live in a highly dynamic world with autoscaling and service registries. Adding another host (whether it&#8217;s
a <span class="caps">VM</span> or an <span class="caps">EC2</span> instance or a container) of a given type should be a simple task in the monitoring&nbsp;tool.</li>
<li>Similarly, configuration needs to be more centralized. Nagios&#8217; check execution model is horribly archaic. There should
be some sort of agent running on monitored hosts that knows what&#8217;s running on the host and what checks are available. A
central tool should know how to monitor those things. I.e. the agent should report in and say, &#8220;Hi, I&#8217;m a production
(based on tags or some local configuration) web server running Apache for the FooBar application.&#8221; The central server
should then determine, &#8220;ok, run these checks with these intervals and tell me the&nbsp;results.&#8221;</li>
<li>Metric collection and monitoring should be unified. We want numeric data points not boolean values. Our alerting and
graphing systems should use the same&nbsp;data.</li>
<li>We should be able to query data out of existing data stores, whether it&#8217;s Graphite or an <span class="caps">API</span>. The big paradigm change
here is taking advantage of bulk queries. A query for state of <span class="caps">ALL</span> of our <span class="caps">EC2</span> instances should update the correct things.
Executing a command for every host or service check is&nbsp;bad.</li>
<li>Service discovery and host&nbsp;discovery.</li>
<li>Notifications. They should have multiple contact methods built-in, and something like PagerDuty. Additionally, end users
should be able to easily manage their own notifications (in addition to central&nbsp;management).</li>
<li>Default notifications shouldn&#8217;t be based on fixed thresholds, they should be based on rate of change over&nbsp;time.</li>
<li>Stop all this <span class="caps">SSH</span> nonsense. Either run a daemon specific to this and listening on its own port and <span class="caps">API</span>, or use a message
queue. Maybe just use MCollective for some of&nbsp;it.</li>
<li>Configuration should mostly be stored centrally. The only configuration on a client should be what <span class="caps">AM</span> I. The central
service should determine what to do/run and how&nbsp;often.</li>
<li>We can&#8217;t think of &#8220;nodes&#8221; as being able to run an arbitraty daemon. Sort of contrary to the above. We want a daemon
for machines that can run it, and for it to be part of the core project, not some bolt-on. But we need to be able to consider
things that can&#8217;t run our software - i.e. appliances with their own APIs - as the same first-class citizens that other
things&nbsp;are.</li>
<li>
<p>We need to be able to handle data that isn&#8217;t just numbers, let alone booleans. Ideally, direct integration with something
like LogStash. Also, what about application-level metrics? What about code introspection and traceback handling like&nbsp;NewRelic?</p>
</li>
<li>
<p>Or maybe what we need is just something that pulls all of this together? i.e. Ring of Power that binds (both configures and
pulls data out of) Logstash, NewRelic, Graphite, and some monitoring tool to provide a unified interface and experience and
notifications, as well as update these things&nbsp;dynamically.</p>
</li>
</ul>
            </div>
            <!-- /.entry-content -->
    <hr />
    <!-- Shariff Button BEGIN -->
    <div class="shariff"
        data-lang="en"
        data-orientation="horizontal"
        data-services = "[&quot;facebook&quot;,&quot;googleplus&quot;,&quot;twitter&quot;,&quot;linkedin&quot;,&quot;diaspora&quot;]"
        data-theme="standard"
        data-url="https://blog.jasonantman.com/drafts/some-thoughts-on-modern-monitoring.html"></div>
    <!-- Shariff Button END -->
    <hr/>
    <section class="comments" id="comments">
        <h2>Comments</h2>

        <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'jantman'; // required: replace example with your forum shortname

                    var disqus_identifier = 'some-thoughts-on-modern-monitoring';
                var disqus_url = 'https://blog.jasonantman.com/drafts/some-thoughts-on-modern-monitoring.html';

            var disqus_config = function () {
                this.language = "en";
            };

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function () {
                var dsq = document.createElement('script');
                dsq.type = 'text/javascript';
                dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by
            Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    </section>
        </article>
    </section>

        </div>
        <div class="col-sm-3" id="sidebar">
            <aside>
<!-- Sidebar -->
<section class="well well-sm">
  <ul class="list-group list-group-flush">

<!-- Sidebar/Recent Posts -->
<li class="list-group-item">
  <h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Recent Posts</span></h4>
  <ul class="list-group" id="recentposts">
    <li class="list-group-item"><a href="https://blog.jasonantman.com/2018/05/linux-surveillance-camera-software-evaluation/">Linux Surveillance Camera Software&nbsp;Evaluation</a></li>
    <li class="list-group-item"><a href="https://blog.jasonantman.com/2018/05/amcrest-ip-camera-first-impressions/">Amcrest <span class="caps">IP</span> Camera First&nbsp;Impressions</a></li>
    <li class="list-group-item"><a href="https://blog.jasonantman.com/2018/04/aws-elasticsearch-for-ad-hoc-elb-log-analysis/"><span class="caps">AWS</span> ElasticSearch for Ad-Hoc <span class="caps">ELB</span> Log&nbsp;Analysis</a></li>
    <li class="list-group-item"><a href="https://blog.jasonantman.com/2018/03/diy-raspberry-pi-zero-gps-track-logger/"><span class="caps">DIY</span> Raspberry Pi Zero <span class="caps">GPS</span> Track&nbsp;Logger</a></li>
    <li class="list-group-item"><a href="https://blog.jasonantman.com/2017/10/cloud-custodian-architecture-deployment-and-policy-preprocessing/">Cloud Custodian Architecture, Deployment and Policy&nbsp;Preprocessing</a></li>
  </ul>
</li>
<!-- End Sidebar/Recent Posts -->

<!-- Sidebar/Twitter Timeline -->
<li class="list-group-item">
  <h4><i class="fa fa-twitter fa-lg"></i><span class="icon-label">Latest Tweets</span></h4>
  <div id="twitter_timeline">
    <a class="twitter-timeline" data-width="250" data-height="300" data-dnt="true" data-theme="light" href="https://twitter.com/j_antman">Tweets by j_antman</a> <script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
  </div>
</li>
<!-- End Sidebar/Twitter Timeline -->

<!-- Sidebar/Github -->
<li class="list-group-item">
  <h4><i class="fa fa-github fa-lg"></i><span class="icon-label">GitHub Repos</span></h4>
  <div id="gh_repos">
    <p class="list-group-item">Status updating...</p>
  </div>
  <a href="https://github.com/jantman">@jantman</a> on GitHub
</li>
<!-- End Sidebar/Github -->

<!-- Sidebar/Links -->
<li class="list-group-item">
  <h4><i class="fa fa-external-link-square fa-lg"></i><span class="icon-label">Links</span></h4>
  <ul class="list-group" id="links">
    <li class="list-group-item">
      <a href="http://www.jasonantman.com" target="_blank">Homepage</a>
    </li>
    <li class="list-group-item">
      <a href="http://resume.jasonantman.com" target="_blank">Resume</a>
    </li>
  </ul>
</li>
<!-- End Sidebar/Links -->
  </ul>
</section>
<!-- End Sidebar -->            </aside>
        </div>
    </div>
</div>
<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2018 Jason Antman
            &middot; Powered by <a href="https://github.com/getpelican/pelican-themes/tree/master/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<script src="https://blog.jasonantman.com/theme/js/jquery.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="https://blog.jasonantman.com/theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="https://blog.jasonantman.com/theme/js/respond.min.js"></script>



    <!-- GITHUB_REPOS_JSON (explicitly pinned repos ) -->
  <script id="GithubReposJson" type="application/json">
  [{"description": "A script and python module to check your AWS service limits and usage via boto.", "name": "awslimitchecker", "html_url": "https://github.com/jantman/awslimitchecker"}, {"description": "Puppet module and accompanying documentation to install/setup Arch linux on a MacBook Pro Retina 11,4", "name": "puppet-archlinux-macbookretina", "html_url": "https://github.com/jantman/puppet-archlinux-macbookretina"}, {"description": "A collection of my standalone scripts to small/quick for their own repos. All kinds of useful stuff.", "name": "misc-scripts", "html_url": "https://github.com/jantman/misc-scripts"}, {"description": "Responsive Flask/SQLAlchemy personal finance app, specifically for biweekly budgeting.", "name": "biweeklybudget", "html_url": "https://github.com/jantman/biweeklybudget"}, {"description": "A standard to easily communicate to humans and machines the development/support and usability status of software repositories/projects.", "name": "repostatus.org", "html_url": "https://github.com/jantman/repostatus.org"}, {"description": "Python/selenium script to get Xfinity bandwidth usage", "name": "xfinity-usage", "html_url": "https://github.com/jantman/xfinity-usage"}]
  </script>

<!-- GitHub JS Code -->
<script type="text/javascript">
$(document).ready(function () {
  if (!window.jXHR) {
    var jxhr = document.createElement('script');
    jxhr.type = 'text/javascript';
    jxhr.src = 'https://blog.jasonantman.com/theme/js/jXHR.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(jxhr, s);
  }

  console.log($('#GithubReposJson').html());
  github.showSpecificRepos({
    user: 'jantman',
    target: '#gh_repos',
    repos: JSON.parse($('#GithubReposJson').html())
  });
});
</script>
<script src="https://blog.jasonantman.com/theme/js/github.js" type="text/javascript"></script>
<!-- End GitHub JS Code -->
    <!-- Disqus -->
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'jantman'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function () {
            var s = document.createElement('script');
            s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
    </script>
    <!-- End Disqus Code -->
    <!-- Google Analytics Universal -->
    <script type="text/javascript">
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-2718127-2', 'jasonantman.com');
        ga('send', 'pageview');
    </script>
    <!-- End Google Analytics Universal Code -->


    <!-- add shariff support -->
    <script src="https://blog.jasonantman.com/theme/js/shariff.min.js"></script>
</body>
</html>