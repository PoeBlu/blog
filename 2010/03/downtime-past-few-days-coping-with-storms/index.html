<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:og="http://ogp.me/ns#"
      xmlns:fb="https://www.facebook.com/2008/fbml">
<head>
    <title>Downtime past few days, coping with storms</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Open Graph tags -->

            <meta property="og:type" content="article"/>
            <meta property="og:title" content="Downtime past few days, coping with storms"/>
            <meta property="og:url" content="http://jantman.github.io/blog/2010/03/downtime-past-few-days-coping-with-storms/"/>
            <meta property="og:description" content="As far as I can see from Google Analytics, though I’m now up to about 4,000 visitors per month for this blog, it seems like most are one-time visitors. So hopefully the few hiccups of the past few days weren’t noticed (except by me, and my mailserver ..."/>

    <!-- Bootstrap -->
        <link rel="stylesheet" href="http://jantman.github.io/blog/theme/css/bootstrap.flatly.min.css" type="text/css"/>
    <link href="http://jantman.github.io/blog/theme/css/font-awesome.min.css" rel="stylesheet">
    <link href="http://jantman.github.io/blog/theme/css/pygments.css" rel="stylesheet">
        <link href="http://jantman.github.io/blog/theme/css/typogrify.css" rel="stylesheet">
    <link rel="stylesheet" href="http://jantman.github.io/blog/theme/css/style.css" type="text/css"/>
    <!-- JavaScript plugins (requires jQuery) -->
    <script src="http://code.jquery.com/jquery.js"></script>


</head>
<body>
<nav class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="http://jantman.github.io/blog" class="navbar-brand">Jason Antman's Blog</a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                         <li><a href="http://jantman.github.io/blog/pages/about.html">
                             About
                          </a></li>
                        <li >
                            <a href="http://jantman.github.io/blog/category/ideas-and-rants.html">Ideas and rants</a>
                        </li>
                        <li class="active">
                            <a href="http://jantman.github.io/blog/category/miscellaneous.html">Miscellaneous</a>
                        </li>
                        <li >
                            <a href="http://jantman.github.io/blog/category/monitoring.html">Monitoring</a>
                        </li>
                        <li >
                            <a href="http://jantman.github.io/blog/category/projects.html">Projects</a>
                        </li>
                        <li >
                            <a href="http://jantman.github.io/blog/category/puppet.html">Puppet</a>
                        </li>
                        <li >
                            <a href="http://jantman.github.io/blog/category/sysadmin.html">Sysadmin</a>
                        </li>
                        <li >
                            <a href="http://jantman.github.io/blog/category/tech-howtos.html">Tech howtos</a>
                        </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li><a href="http://jantman.github.io/blog/archives.html"><i class="icon-th-list"></i>Archives</a></li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</nav>
<!-- /.navbar -->
<div class="container">
    <div class="row">
        <div class="col-lg-9">
    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="http://jantman.github.io/blog/2010/03/downtime-past-few-days-coping-with-storms/"
                       rel="bookmark"
                       title="Permalink to Downtime past few days, coping with storms">
                        Downtime past few days, coping with&nbsp;storms
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <span class="label label-default">Date</span>
    <span class="published">
        <i class="icon-calendar"></i>Wed 17 March 2010
    </span>



<span class="label label-default">Tags</span>
	<a href="http://jantman.github.io/blog/tag/availability.html">availability</a>
        /
	<a href="http://jantman.github.io/blog/tag/power.html">power</a>
        /
	<a href="http://jantman.github.io/blog/tag/reliability.html">reliability</a>
        /
	<a href="http://jantman.github.io/blog/tag/ups.html">UPS</a>
        /
	<a href="http://jantman.github.io/blog/tag/uptime.html">uptime</a>
</footer><!-- /.post-info -->                    </div>
                </div>
                <p>As far as I can see from <a href="http://www.google.com/analytics/">Google
Analytics</a>, though I&#8217;m now up to about
4,000 visitors per month for this blog, it seems like most are one-time
visitors. So hopefully the few hiccups of the past few days weren&#8217;t
noticed (except by me, and my mailserver&#8230;). As many of you in the <span class="caps">US</span>
may know, New Jersey was hit by a pretty big nor&#8217;easter last weekend and
my area was
<a href="http://www.northjersey.com/news/bergen/87665172_Weekend_storm_thrashes_Wyckoff.html">especially</a>
<a href="http://www.northjersey.com/news/87704777_Ridgewood_power_outages_could_last_for_days.html">hard</a>
<a href="http://www.northjersey.com/news/87852727_Downed_trees__power_lines_bring_Glen_Rock_to_a_near_standstill.html">hit</a>.
I lost power for about five hours Saturday night (the 13th) and again
for an hour or so the next morning. Needless to say, these were both
much longer than my small UPSes could cope with (the smaller of the two
has a mere 12 minutes of runtime with brand new batteries). While I do
have a small (2500W) gas generator, it was buried in the back of the
garage. The time it would take to dig it out and string extension cords
from the UPSes to a relatively dry area outside would probably be more
than 12 minutes - not to mention that as first lieutenant
(second-in-command) of the town&#8217;s volunteer <a href="http://www.midlandparkambulance.com/">ambulance
corps</a>, I was running in the
opposite direction once things got&nbsp;bad.</p>
<p>Luckily, the problems caused or uncovered by the power loss were
relatively&nbsp;minor:</p>
<ol>
<li>The batteries in my smaller <span class="caps">UPS</span> lasted about 90 seconds. I&#8217;d noticed
    the bad battery light a few weeks ago, but put it off (hey, it&#8217;s my
    home setup, I don&#8217;t exactly have a budget).
    <a href="http://www.refurbups.com">RefurbUPS</a>, where I got the two <span class="caps">APC</span>
    <span class="caps">SU1000NET</span>&#8217;s, got me a replacement <span class="caps">RBC6</span> (aftermarket, not original
    <span class="caps">APC</span>) in two days, for around $73. Unfortunately, my Tripp Lite
    <span class="caps">SMART2200RMXL2U</span> (unfortunately without the external battery pack)
    also just had its orange light pop on, so there goes another&nbsp;$90.</li>
<li>The battery replacement caused another short (\~5 minute) downtime
    tonight, including my router. Unfortunately the router is plugged
    into the smaller of the two UPSes, and none of my current boxes have
    more than one power supply. Mistake. Especially considering my
    limited resources. On the positive side, I took the opportunity to
    move all of the equipment onto <a href="http://www.liebert.com/product_pages/Product.aspx?id=6&amp;hz=60">Liebert
    MicroPOD</a>s.</li>
<li>The external <span class="caps">SATA</span> disk for my desktop used to store media is dead.
    I&#8217;m getting incessant read errors, followed by offlining the disk,
    on two <span class="caps">USB</span> adapters and internal <span class="caps">SATA</span>. I guess I should have a
    better surge protector for the&nbsp;desktop.</li>
<li>A few of my boxes didn&#8217;t come up clean, mainly due to entropy in the
    configs, or services that were never <code>chkconfig</code>&#8216;ed. Well, I don&#8217;t
    use any configuration management at&nbsp;home.</li>
<li>One of the disks in my storage server (<span class="caps">RAID</span> 1+0 of 6x 36.4Gb 10k <span class="caps">RPM</span>
    <span class="caps">SCSI</span> disks) died - actually a few days before the power outage. I
    was able to find a new replacement on Ebay, with warranty, for about&nbsp;$40.</li>
<li>Many of my internal services - including a lot of the
    <a href="http://www.nagios.org">Nagios</a> checks - use a separate gigabit
    management network, run off of an older GigE aggregation switch.
    This was on the smaller <span class="caps">UPS</span>, so it went down quick. As both this and
    my main switch are of the same series, perhaps an <span class="caps">RPS</span> unit would be
    worth the&nbsp;money.</li>
</ol>
<p>Plans for the&nbsp;future:</p>
<ul>
<li>Get <a href="http://reductivelabs.com/products/puppet/">Puppet</a> working at
    home. As part of this, buy a spare server so I can migrate services
    one at a time to a puppet-ized version, test, and then rebuild
    (while the production machine is still&nbsp;running).</li>
<li>In the future, given my limited infrastructure, purchasing dual
    power supply machines - and putting the PSes on separate UPSes -
    would be a good&nbsp;thing.</li>
<li>Configure the Tripp Lite <span class="caps">UPS</span> to do load&nbsp;shedding.</li>
<li>Setup <span class="caps">UPS</span> management software to bring down boxes in a logical&nbsp;order.</li>
<li>Power savings is also important - so I&#8217;m thinking about rebuilding
    things using <a href="http://www.xen.org/">Xen</a>, and using live migration to
    both distribute load logically under normal circumstances, and to
    move around loads in the event of power failure (kill
    non-critical/internal-only stuff, consolidate the&nbsp;rest).</li>
</ul>
            </div>
            <!-- /.entry-content -->
        </article>
    </section>

        </div>
        <div class="col-lg-3 well well-sm" id="sidebar">

<aside>
    <section>
        <ul class="list-group list-group-flush">
                <li class="list-group-item"><h4><i class="icon-home icon-large"></i>Social</h4></li>
                    <li class="list-group-item"><a href="#"><i
                            class="icon-You can add links in your config file-sign icon-large"></i>You can add links in your config file
                    </a></li>
                    <li class="list-group-item"><a href="#"><i
                            class="icon-Another social link-sign icon-large"></i>Another social link
                    </a></li>



                <li class="list-group-item"><a href="http://jantman.github.io/blog/tags.html"><h4><i class="icon-tags icon-large"></i>Tags</h4></a></li>
                        <li class="list-group-item tag-1">
                            <a href="http://jantman.github.io/blog/tag/google.html">
                                google
                            </a>
                        </li>
                        <li class="list-group-item tag-1">
                            <a href="http://jantman.github.io/blog/tag/sysadmin.html">
                                sysadmin
                            </a>
                        </li>
                        <li class="list-group-item tag-1">
                            <a href="http://jantman.github.io/blog/tag/php.html">
                                PHP
                            </a>
                        </li>
                        <li class="list-group-item tag-1">
                            <a href="http://jantman.github.io/blog/tag/android.html">
                                android
                            </a>
                        </li>
                        <li class="list-group-item tag-1">
                            <a href="http://jantman.github.io/blog/tag/linux.html">
                                linux
                            </a>
                        </li>
                        <li class="list-group-item tag-1">
                            <a href="http://jantman.github.io/blog/tag/nagios.html">
                                Nagios
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://jantman.github.io/blog/tag/syslog.html">
                                syslog
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://jantman.github.io/blog/tag/sun.html">
                                sun
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://jantman.github.io/blog/tag/mediawiki.html">
                                mediawiki
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://jantman.github.io/blog/tag/blog.html">
                                blog
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://jantman.github.io/blog/tag/dns.html">
                                dns
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://jantman.github.io/blog/tag/security.html">
                                security
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://jantman.github.io/blog/tag/puppet.html">
                                puppet
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://jantman.github.io/blog/tag/mac.html">
                                mac
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://jantman.github.io/blog/tag/ems.html">
                                EMS
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://jantman.github.io/blog/tag/bind.html">
                                bind
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://jantman.github.io/blog/tag/wordpress.html">
                                wordpress
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://jantman.github.io/blog/tag/rpm.html">
                                rpm
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://jantman.github.io/blog/tag/perl.html">
                                perl
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://jantman.github.io/blog/tag/logging.html">
                                logging
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://jantman.github.io/blog/tag/firefox.html">
                                firefox
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://jantman.github.io/blog/tag/apache.html">
                                apache
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://jantman.github.io/blog/tag/droid.html">
                                droid
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://jantman.github.io/blog/tag/microsoft.html">
                                microsoft
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://jantman.github.io/blog/tag/monitoring.html">
                                monitoring
                            </a>
                        </li>
        </ul>
    </section>
</aside>        </div>
    </div>
</div>
<footer>
    <div class="container">
        <hr>
        <p class="pull-right"><i class="icon-arrow-up"></i> <a href="#">Back to top</a></p>


        <p>&copy; 2014 Jason Antman &middot; Powered by <a href="https://github.com/DandyDev/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a></p>
    </div>
</footer>
<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="http://jantman.github.io/blog/theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="http://jantman.github.io/blog/theme/js/respond.min.js"></script>


</body>
</html>