<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:og="http://ogp.me/ns#"
      xmlns:fb="https://www.facebook.com/2008/fbml">
<head>
    <title>Sun Blade 150 working!</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Open Graph tags -->

            <meta property="og:type" content="article"/>
            <meta property="og:title" content="Sun Blade 150 working!"/>
            <meta property="og:url" content="http://jantman.github.io/blog/2007/12/sun-blade-150-working/"/>
            <meta property="og:description" content="Yes, it’s 3 AM here, and I’ve been working since about 6 PM on this. But I finally got one of my two surplus (and fully locked down in NVRAM) Sun Blade 150 workstations up and running. I encountered a few problems along the way, but managed to ..."/>

    <!-- Bootstrap -->
        <link rel="stylesheet" href="http://jantman.github.io/blog/theme/css/bootstrap.flatly.min.css" type="text/css"/>
    <link href="http://jantman.github.io/blog/theme/css/font-awesome.min.css" rel="stylesheet">
    <link href="http://jantman.github.io/blog/theme/css/pygments.css" rel="stylesheet">
        <link href="http://jantman.github.io/blog/theme/css/typogrify.css" rel="stylesheet">
    <link rel="stylesheet" href="http://jantman.github.io/blog/theme/css/style.css" type="text/css"/>
    <!-- JavaScript plugins (requires jQuery) -->
    <script src="http://code.jquery.com/jquery.js"></script>


</head>
<body>
<nav class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="http://jantman.github.io/blog" class="navbar-brand">Jason Antman's Blog</a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                         <li><a href="http://jantman.github.io/blog/pages/about.html">
                             About
                          </a></li>
                        <li >
                            <a href="http://jantman.github.io/blog/category/ideas-and-rants.html">Ideas and rants</a>
                        </li>
                        <li >
                            <a href="http://jantman.github.io/blog/category/miscellaneous.html">Miscellaneous</a>
                        </li>
                        <li >
                            <a href="http://jantman.github.io/blog/category/monitoring.html">Monitoring</a>
                        </li>
                        <li >
                            <a href="http://jantman.github.io/blog/category/projects.html">Projects</a>
                        </li>
                        <li >
                            <a href="http://jantman.github.io/blog/category/puppet.html">Puppet</a>
                        </li>
                        <li >
                            <a href="http://jantman.github.io/blog/category/sysadmin.html">Sysadmin</a>
                        </li>
                        <li class="active">
                            <a href="http://jantman.github.io/blog/category/tech-howtos.html">Tech howtos</a>
                        </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li><a href="http://jantman.github.io/blog/archives.html"><i class="icon-th-list"></i>Archives</a></li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</nav>
<!-- /.navbar -->
<div class="container">
    <div class="row">
        <div class="col-lg-9">
    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="http://jantman.github.io/blog/2007/12/sun-blade-150-working/"
                       rel="bookmark"
                       title="Permalink to Sun Blade 150 working!">
                        Sun Blade 150&nbsp;working!
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <span class="label label-default">Date</span>
    <span class="published">
        <i class="icon-calendar"></i>Fri 14 December 2007
    </span>



<span class="label label-default">Tags</span>
	<a href="http://jantman.github.io/blog/tag/nvram.html">nvram</a>
        /
	<a href="http://jantman.github.io/blog/tag/openboot.html">openboot</a>
        /
	<a href="http://jantman.github.io/blog/tag/password.html">password</a>
        /
	<a href="http://jantman.github.io/blog/tag/smc.html">smc</a>
        /
	<a href="http://jantman.github.io/blog/tag/solaris.html">solaris</a>
        /
	<a href="http://jantman.github.io/blog/tag/sun.html">sun</a>
        /
	<a href="http://jantman.github.io/blog/tag/sunblade.html">sunblade</a>
</footer><!-- /.post-info -->                    </div>
                </div>
                <p>Yes, it&#8217;s 3 <span class="caps">AM</span> here, and I&#8217;ve been working since about 6 <span class="caps">PM</span> on this. But
I finally got one of my two surplus (and fully locked down in <span class="caps">NVRAM</span>) Sun
Blade 150 workstations up and running. I encountered a few problems
along the way, but managed to solve them - more or&nbsp;less.</p>
<p><span style="font-weight: bold;">Problem 1 - <span class="caps">NVRAM</span> password set,
impossible to install an <span class="caps">OS</span>.</span><br />
I did a *lot* of googling, and asking for advice. Eventually, I came
by a forum post expressing success with a procedure of pulling out and
then re-inserting the <span class="caps">NVRAM</span> *while* the system is powered on. This
left my system un-bootable. I pulled the chip again, and found two pins
bent. I straightened them, re-inserted, and rebooted using the Stop+N
Equivalent Functionality (after powering on the system, once you hear
the <span class="caps">POST</span> beep, click the power button twice quickly). This temporarily
resets the <span class="caps">NVRAM</span> to default settings. I found that the password was
gone, and was able to issue the &#8220;set-defaults&#8221; command at the &#8220;ok>&#8221;
prompt. I then popped in the Solaris 10 install <span class="caps">CD</span>, issued the
&#8220;reset-all&#8221; command to reboot, and used Stop+A at boot to bring up a
boot menu, and told it to boot from <span class="caps">CDROM</span> (&#8220;boot cdrom&#8221;). Installation
then&nbsp;started.</p>
<p><span style="font-weight: bold;">Problem 2 - Invalid <span class="caps">NVRAM</span></span><br />
After the above procedure, when booting, I got a message following the
Sun banner stating that there was a problem with the IDprom checksum.
When the install <span class="caps">CD</span> booted, I also got messages stating &#8220;Invalid format
code in IDprom&#8221;, &#8220;Warning: IDprom checksum error&#8221;, and &#8220;os-io Invalid
format code in IDprom&#8221;. After another five hours of work, I found that
it&#8217;s essentially something I have to live with. While OpenBoot previous
to version 4 allowed use of the &#8220;mkp&#8221; and &#8220;mkpl&#8221; commands to directly
write the IDprom, version 4 and above allows no access to this. The
IDprom was reporting an ethernet (mac) address of all zeros.
Unfortunately, there seems to be no way to correct this as far as I&#8217;ve
found. However, it didn&#8217;t effect my <span class="caps">OS</span> installation&#8230;&nbsp;much.</p>
<p>*There may be a way to access the IDprom through OpenBoot 4.x, but I
couldn&#8217;t find any reference to it online, and couldn&#8217;t figure out the
<span class="caps">FORTH</span> commands from the reference&nbsp;docs.</p>
<p>Some helpful links for the above problems include the OpenBoot 4.x
Command Reference Manual, currently found
<a href="http://dlc.sun.com/pdf/816-1177-10/816-1177-10.pdf">here</a>, as well as
the Sun Blade 150 Service Manual (from
<a href="http://docs.sun.com/">docs.sun.com</a>), document 816-4379-10, currently
indexed with the Sun Blade 150 docs
<a href="http://docs.sun.com/app/docs/coll/sb150">here</a>. It was also
interesting, in my search for help, to look at the OpenBoot 3.x Command
Manual, and see how easy it was to re-write the IDprom on older Sun
Blade&nbsp;workstations.</p>
<p>Pleaese note that the advice given in the <a href="http://040.digital-bless.com/texts/Unofficial_Sun_Blade_100_FAQ.htm">Unofficial SunBlade 100
<span class="caps">FAQ</span></a>
and the <a href="http://www.squirrel.com/sun-nvram-hostid.faq.html">squirrel.com Sun <span class="caps">NVRAM</span>
<span class="caps">FAQ</span></a> doesn&#8217;t seem to
work on the 150 with OpenBoot 4.x. From what I can tell, all of that
advice applies only to OpenBoot&nbsp;3.x!</p>
<p>Some other helpful links included an ITworld.com article on <a href="http://open.itworld.com/5040/nlsunixfirmware070111/page_1.html">Sun <span class="caps">NVRAM</span>
passwords</a>,
<a href="http://forum.java.sun.com/thread.jspa?threadID=5093819&amp;messageID=9329080">this</a>
Sun Developer Forum post, and
<a href="http://forum.java.sun.com/thread.jspa?threadID=5093819&amp;messageID=9329080">this</a>
post on password&nbsp;recovery.</p>
<p><span style="font-weight: bold;">Problem 3 - <span class="caps">MAC</span> / Ethernet address is
00:00:00:00:00:00</span><br />
When booting Solaris, I found that I couldn&#8217;t get <span class="caps">DHCP</span>. When I finally
got the <span class="caps">OS</span> running and logged in as root, I realized something
interesting - I couldn&#8217;t access or ping anything past the one switch I
was connected to. But everything on that switch was fine, pinging both
from and to the Solaris box. I ping&#8217;ed from my laptop, and then thought
to run &#8220;arp -a&#8221;. It showed a <span class="caps">MAC</span> address of 00:00:00:00:00:00! Running
&#8220;ifconfig -a&#8221; on the Solaris box confirmed this. Luckily, the first time
I booted this box, I wrote down the ethernet address and hostID as shown
on the banner. I ran a quick ifconfig to setup the correct <span class="caps">MAC</span>, like
&#8220;ifconfig eri0 ether xx:xx:xx:xx:xx:xx&#8221;. Networking now worked
perfectly, and I could get to everything on the <span class="caps">LAN</span> as well as browse
the web. It would be good to somehow reset this in <span class="caps">NVRAM</span>, but for now
I&#8217;m just going to add it to the startup scripts somewhere. One forum
post that I found suggested adding the previous ifconfig command to the
top of /etc/rc.c/init.d/network, which I&#8217;ve done and will see how it
works at the next&nbsp;boot.</p>
<p><span style="font-weight: bold;">Problem 4 - Can&#8217;t login to <span class="caps">SMC</span> (Solaris
Management Console)</span><br />
My next task after getting the system up and running, and getting
networking working, as to give myself a user account. I was logged in
using the Java Desktop System, so I opened a terminal and ran &#8220;smc &amp;&#8221;.
After the usual initialization wait, I loaded the toolboxes for the
local machine, and connected. When I clicked on the &#8220;users&#8221; module and
entered my root password, I got an invalid password / login failed
message. I tried again and again, even checking against the post-it that
I wrote the password on until I memorize it. Nothing. Searching the
forums, I came by this
<a href="http://forum.java.sun.com/thread.jspa?threadID=5104081&amp;messageID=9354742">post</a>,
but the value in /etc/security/policy.conf was correctly set to &#8221;
CRYPT_DEFAULT=__unix__&#8221;. So, on a wild hunch, I used &#8220;passwd&#8221; to
reset my password to a shorter one, which I use on a few other
(unimportant) workstations.&nbsp;Magic!</p>
<p>I now have, after two days of work, a working Solaris box. Now that I
have a good <span class="caps">OS</span> install, in order to get the other box working, I
*should* just be able to swap HDDs, boot, login as root, and use the
&#8220;eeprom&#8221; command to set &#8220;security-mode&#8221; to &#8220;none&#8221;, bypassing all of this&nbsp;bull****.</p>
            </div>
            <!-- /.entry-content -->
        </article>
    </section>

        </div>
        <div class="col-lg-3 well well-sm" id="sidebar">

<aside>
    <section>
        <ul class="list-group list-group-flush">
                <li class="list-group-item"><h4><i class="icon-home icon-large"></i>Social</h4></li>
                    <li class="list-group-item"><a href="#"><i
                            class="icon-You can add links in your config file-sign icon-large"></i>You can add links in your config file
                    </a></li>
                    <li class="list-group-item"><a href="#"><i
                            class="icon-Another social link-sign icon-large"></i>Another social link
                    </a></li>



                <li class="list-group-item"><a href="http://jantman.github.io/blog/tags.html"><h4><i class="icon-tags icon-large"></i>Tags</h4></a></li>
                        <li class="list-group-item tag-1">
                            <a href="http://jantman.github.io/blog/tag/google.html">
                                google
                            </a>
                        </li>
                        <li class="list-group-item tag-1">
                            <a href="http://jantman.github.io/blog/tag/sysadmin.html">
                                sysadmin
                            </a>
                        </li>
                        <li class="list-group-item tag-1">
                            <a href="http://jantman.github.io/blog/tag/php.html">
                                PHP
                            </a>
                        </li>
                        <li class="list-group-item tag-1">
                            <a href="http://jantman.github.io/blog/tag/android.html">
                                android
                            </a>
                        </li>
                        <li class="list-group-item tag-1">
                            <a href="http://jantman.github.io/blog/tag/linux.html">
                                linux
                            </a>
                        </li>
                        <li class="list-group-item tag-1">
                            <a href="http://jantman.github.io/blog/tag/nagios.html">
                                Nagios
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://jantman.github.io/blog/tag/syslog.html">
                                syslog
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://jantman.github.io/blog/tag/sun.html">
                                sun
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://jantman.github.io/blog/tag/mediawiki.html">
                                mediawiki
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://jantman.github.io/blog/tag/blog.html">
                                blog
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://jantman.github.io/blog/tag/dns.html">
                                dns
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://jantman.github.io/blog/tag/security.html">
                                security
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://jantman.github.io/blog/tag/puppet.html">
                                puppet
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://jantman.github.io/blog/tag/mac.html">
                                mac
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://jantman.github.io/blog/tag/ems.html">
                                EMS
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://jantman.github.io/blog/tag/bind.html">
                                bind
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://jantman.github.io/blog/tag/wordpress.html">
                                wordpress
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://jantman.github.io/blog/tag/rpm.html">
                                rpm
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://jantman.github.io/blog/tag/perl.html">
                                perl
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://jantman.github.io/blog/tag/logging.html">
                                logging
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://jantman.github.io/blog/tag/firefox.html">
                                firefox
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://jantman.github.io/blog/tag/apache.html">
                                apache
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://jantman.github.io/blog/tag/droid.html">
                                droid
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://jantman.github.io/blog/tag/microsoft.html">
                                microsoft
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://jantman.github.io/blog/tag/monitoring.html">
                                monitoring
                            </a>
                        </li>
        </ul>
    </section>
</aside>        </div>
    </div>
</div>
<footer>
    <div class="container">
        <hr>
        <p class="pull-right"><i class="icon-arrow-up"></i> <a href="#">Back to top</a></p>


        <p>&copy; 2014 Jason Antman &middot; Powered by <a href="https://github.com/DandyDev/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a></p>
    </div>
</footer>
<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="http://jantman.github.io/blog/theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="http://jantman.github.io/blog/theme/js/respond.min.js"></script>


</body>
</html>