<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:og="http://ogp.me/ns#"
      xmlns:fb="https://www.facebook.com/2008/fbml">
<head>
    <title>Blackberry Oops</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Open Graph tags -->

            <meta property="og:type" content="article"/>
            <meta property="og:title" content="Blackberry Oops"/>
            <meta property="og:url" content="http://jantman.github.io/blog/2011/10/blackberry-oops/"/>
            <meta property="og:description" content="If you’ve been following the tech news lately, you’ve probably heard at least a bit about the massive blackberry outage over the past three days. While yes, it’s the first truly grand failure of RIM’s infrastructure in their 12-year history, it’s also a wonderful case ..."/>

    <!-- Bootstrap -->
        <link rel="stylesheet" href="http://jantman.github.io/blog/theme/css/bootstrap.flatly.min.css" type="text/css"/>
    <link href="http://jantman.github.io/blog/theme/css/font-awesome.min.css" rel="stylesheet">
    <link href="http://jantman.github.io/blog/theme/css/pygments.css" rel="stylesheet">
        <link href="http://jantman.github.io/blog/theme/css/typogrify.css" rel="stylesheet">
    <link rel="stylesheet" href="http://jantman.github.io/blog/theme/css/style.css" type="text/css"/>
    <!-- JavaScript plugins (requires jQuery) -->
    <script src="http://code.jquery.com/jquery.js"></script>


</head>
<body>
<nav class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="http://jantman.github.io/blog" class="navbar-brand">Jason Antman's Blog</a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                         <li><a href="http://jantman.github.io/blog/pages/about.html">
                             About
                          </a></li>
                        <li >
                            <a href="http://jantman.github.io/blog/category/ideas-and-rants.html">Ideas and rants</a>
                        </li>
                        <li class="active">
                            <a href="http://jantman.github.io/blog/category/miscellaneous.html">Miscellaneous</a>
                        </li>
                        <li >
                            <a href="http://jantman.github.io/blog/category/monitoring.html">Monitoring</a>
                        </li>
                        <li >
                            <a href="http://jantman.github.io/blog/category/projects.html">Projects</a>
                        </li>
                        <li >
                            <a href="http://jantman.github.io/blog/category/puppet.html">Puppet</a>
                        </li>
                        <li >
                            <a href="http://jantman.github.io/blog/category/sysadmin.html">Sysadmin</a>
                        </li>
                        <li >
                            <a href="http://jantman.github.io/blog/category/tech-howtos.html">Tech howtos</a>
                        </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li><a href="http://jantman.github.io/blog/archives.html"><i class="icon-th-list"></i>Archives</a></li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</nav>
<!-- /.navbar -->
<div class="container">
    <div class="row">
        <div class="col-lg-9">
    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="http://jantman.github.io/blog/2011/10/blackberry-oops/"
                       rel="bookmark"
                       title="Permalink to Blackberry Oops">
                        Blackberry&nbsp;Oops
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <span class="label label-default">Date</span>
    <span class="published">
        <i class="icon-calendar"></i>Thu 13 October 2011
    </span>



<span class="label label-default">Tags</span>
	<a href="http://jantman.github.io/blog/tag/blackberry.html">blackberry</a>
        /
	<a href="http://jantman.github.io/blog/tag/outage.html">outage</a>
</footer><!-- /.post-info -->                    </div>
                </div>
                <p>If you&#8217;ve been following the tech news lately, you&#8217;ve probably heard at
least a bit about the
<a href="http://www.cnn.com/2011/10/12/tech/mobile/blackberry-outage/">massive</a>
<a href="http://abcnews.go.com/blogs/technology/2011/10/blackberry-outage-spreads-to-u-s/">blackberry</a>
<a href="http://www.nytimes.com/2011/10/14/technology/rim-struggles-to-overcome-blackberry-outages.html?_r=1">outage</a>
over the past three days. While yes, it&#8217;s the first truly grand failure
of <span class="caps">RIM</span>&#8217;s infrastructure in their 12-year history, it&#8217;s also a wonderful
case&nbsp;study.</p>
<p>Apparently the outage started Monday morning with <span class="caps">RIM</span> infrastructure in
Europe, the Middle East and Asia. However, by Wednesday, it had become a
global outage/slowdown of BlackBerry infrastructure (specifically the
parts that go through <span class="caps">RIM</span> - email, web browsing, and <span class="caps">BBM</span>; voice calls
and <span class="caps">SMS</span>/<span class="caps">MMS</span> were unaffected). With BlackBerry&#8217;s market share falling,
Android&#8217;s rapidly growing (and Android slowly becoming a viable
enterprise option), and the launch of the iPhone 4S just around the
corner, the timing of this couldn&#8217;t be worse for&nbsp;<span class="caps">RIM</span>.</p>
<p><span class="caps">RIM</span>&#8217;s original
<a href="http://www.rim.com/newsroom/service-update.shtml">statement</a> about the
problem, at 21:30 on Tuesday October 11th,&nbsp;was,</p>
<blockquote>
<p>The messaging and browsing delays that some of you are still
experiencing were caused by a core switch failure within <span class="caps">RIM</span>’s
infrastructure. Although the system is designed to failover to a
back-up switch, the failover did not function as previously tested. As
a result, a large backlog of data was generated and we are now working
to clear that backlog and restore normal service as quickly as
possible. We sincerely apologise for the inconvenience caused to many
of you and we will continue to keep you&nbsp;informed.</p>
</blockquote>
<p>I haven&#8217;t been able to find much more technical information than that -
a <a href="http://www.computerworld.com/s/article/9220736/RIM_global_outage_caused_by_core_switch_failure_fix_under_way"><span class="caps">CNET</span> article from
Tuesday</a>
goes into as much depth as anything I could find. I did find one mention
(misplaced the link) that the core switch in question uses technology
from &#8220;multiple vendors&#8221;. So what follows is part common sense (for me&#8230;
why not for a multi-national corporation?) and part speculation. If
you&#8217;re unfamiliar with <span class="caps">RIM</span>&#8217;s architecture, the pertinent points are that
all Internet-bound traffic (browsing, email, and <span class="caps">BBM</span>) is piped through
<span class="caps">RIM</span>&#8217;s data centers, where it&#8217;s encypted and who-knows-what-else&#8217;ed
(perhaps
<a href="http://online.wsj.com/article/SB10001424052970204612504576608561811929654.html">monitored</a>)
before going back out onto the &#8216;net. In the Enterprise market, their big
claim is encryption/security, and monitoring/management/policy
enforcement on&nbsp;handsets.</p>
<p>First main point: <span class="caps">RIM</span> is a <em>big</em> company. The thought that they rely on
an (apparently custom) core switch - a <em>single</em> core switch for multiple
<em>continents</em> - is amazing. It&#8217;s even more amazing that they&#8217;d let such a
large part of their infrastructure ride on an architecture with,
apparently, an untested failover mechanism. Of course I don&#8217;t know all
the details, but I&#8217;d hope that for a single piece of hardware which is
so critical, they&#8217;d a) have a cold spare physically nearby so a
replacement wouldn&#8217;t take a day or two, and b) if they can&#8217;t do an
online failover test, at least have a full lab environment to test the
failover&nbsp;in.</p>
<p>Second main point: Their big claim through all of this is that they
didn&#8217;t lose any data - email, <span class="caps">BBM</span>, etc. - it just got delayed. So if
there was a core switch failure in their data center serving <span class="caps">EMEA</span>, and
the next day global services slowed to a crawl, the only thing that
comes to mind to me is a waterfall; <span class="caps">EMEA</span> went down, and they started
rerouting traffic to their North America data center. The increased load
- probably a disaster recovery plan they never truly tested or even
planned - brought everything to a screeching halt, and caused them to
resort to simply caching messaging and pushing it out bit by bit as the
infrastructure could handle.&nbsp;Oops.</p>
<p>So what are my (admittedly poorly-informed) thoughts on&nbsp;this?</p>
<ol>
<li>
<p>Scaling out works. Scaling up - especially with single points of
    failure, or N+1 redundancy - is dangerous. If <span class="caps">RIM</span> had scaled out and
    used regional data centers, with a close-to-commodity core and as
    much redundancy as possible, this wouldn&#8217;t have happened. Sure,
    infrastructure costs money. But if that one &#8220;core switch&#8221; had been
    1,000 devices spread across multiple racks in multiple data centers,
    this never would have happened. And the devices would be
    comparatively cheap enough to probably keep spares on hand too. And
    regularly test their failover procedures. To all of the big
    businesses (apparently like <span class="caps">RIM</span>) who still think that big iron is
    the only way to do things right&#8230; maybe it&#8217;s time to take a hard
    look at that, and compare your architecture to that of the modern,
    new, hip giants like Google and Facebook. Grids and clusters. Nodes
    that can fail without anyone blinking. Scaling out might not fix
    every problem, but having half the world on a single core switch
    with N+1 redundancy probably isn&#8217;t smart&nbsp;either.</p>
</li>
<li>
<p>Disasters need to be planned for. Every possible contingency needs
    to be planned for. Plans need to be tested, regularly. If your giant
    core switch goes down and the failover doesn&#8217;t &#8220;function as
    previously tested&#8221;, there&#8217;s a serious problem both in your disaster
    planning, and in your validation and test procedure. If you have
    half of your customer base riding on a failover plan that isn&#8217;t
    <em>regularly</em> tested or otherwise validated, that&#8217;s bad. While I can
    argue that the whole architecture - given this massive point of
    failure - could stand to be re-thought, the real issue here is with
    test/validation methodologies and procedures. For a company with 70
    million users, having a piece of infrastructure this critical fail,
    and the failover &#8216;not work as tested&#8217; is a very serious&nbsp;issue.</p>
</li>
<li>
<p>Damage control is important. As I said, I can only imagine that the
    severe service degradation outside of <span class="caps">EMEA</span> was due to rerouting data
    from <span class="caps">EMEA</span> to the remaining functional data center(s). Such a
    solution should only be considered if it has been tested, or at
    least has engineering validation. If it was part of the disaster
    recovery plan, it obviously isn&#8217;t actually a suitable solution, and
    served only to increase the scope of the outage. If it wasn&#8217;t part
    of the disaster recovery plan, and was decided on-the-fly, someone
    really didn&#8217;t do their research and engineering before putting the
    fix in place. A workable solution should have been planned ahead of
    time. And if one wasn&#8217;t, it&#8217;s very bad practice - this outage shows
    the results - to put in place a fix that hasn&#8217;t been thought&nbsp;out.</p>
</li>
</ol>
<p>For a company whose business is so telecom-focused, this seems like a
glaringly bad design that shouldn&#8217;t be acceptable in a&nbsp;telecom.</p>
            </div>
            <!-- /.entry-content -->
        </article>
    </section>

        </div>
        <div class="col-lg-3 well well-sm" id="sidebar">

<aside>
    <section>
        <ul class="list-group list-group-flush">
                <li class="list-group-item"><h4><i class="icon-home icon-large"></i>Social</h4></li>
                    <li class="list-group-item"><a href="#"><i
                            class="icon-You can add links in your config file-sign icon-large"></i>You can add links in your config file
                    </a></li>
                    <li class="list-group-item"><a href="#"><i
                            class="icon-Another social link-sign icon-large"></i>Another social link
                    </a></li>



                <li class="list-group-item"><a href="http://jantman.github.io/blog/tags.html"><h4><i class="icon-tags icon-large"></i>Tags</h4></a></li>
                        <li class="list-group-item tag-1">
                            <a href="http://jantman.github.io/blog/tag/google.html">
                                google
                            </a>
                        </li>
                        <li class="list-group-item tag-1">
                            <a href="http://jantman.github.io/blog/tag/sysadmin.html">
                                sysadmin
                            </a>
                        </li>
                        <li class="list-group-item tag-1">
                            <a href="http://jantman.github.io/blog/tag/php.html">
                                PHP
                            </a>
                        </li>
                        <li class="list-group-item tag-1">
                            <a href="http://jantman.github.io/blog/tag/android.html">
                                android
                            </a>
                        </li>
                        <li class="list-group-item tag-1">
                            <a href="http://jantman.github.io/blog/tag/linux.html">
                                linux
                            </a>
                        </li>
                        <li class="list-group-item tag-1">
                            <a href="http://jantman.github.io/blog/tag/nagios.html">
                                Nagios
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://jantman.github.io/blog/tag/syslog.html">
                                syslog
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://jantman.github.io/blog/tag/sun.html">
                                sun
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://jantman.github.io/blog/tag/mediawiki.html">
                                mediawiki
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://jantman.github.io/blog/tag/blog.html">
                                blog
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://jantman.github.io/blog/tag/dns.html">
                                dns
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://jantman.github.io/blog/tag/security.html">
                                security
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://jantman.github.io/blog/tag/puppet.html">
                                puppet
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://jantman.github.io/blog/tag/mac.html">
                                mac
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://jantman.github.io/blog/tag/ems.html">
                                EMS
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://jantman.github.io/blog/tag/bind.html">
                                bind
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://jantman.github.io/blog/tag/wordpress.html">
                                wordpress
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://jantman.github.io/blog/tag/rpm.html">
                                rpm
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://jantman.github.io/blog/tag/perl.html">
                                perl
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://jantman.github.io/blog/tag/logging.html">
                                logging
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://jantman.github.io/blog/tag/firefox.html">
                                firefox
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://jantman.github.io/blog/tag/apache.html">
                                apache
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://jantman.github.io/blog/tag/droid.html">
                                droid
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://jantman.github.io/blog/tag/microsoft.html">
                                microsoft
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://jantman.github.io/blog/tag/monitoring.html">
                                monitoring
                            </a>
                        </li>
        </ul>
    </section>
</aside>        </div>
    </div>
</div>
<footer>
    <div class="container">
        <hr>
        <p class="pull-right"><i class="icon-arrow-up"></i> <a href="#">Back to top</a></p>


        <p>&copy; 2014 Jason Antman &middot; Powered by <a href="https://github.com/DandyDev/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a></p>
    </div>
</footer>
<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="http://jantman.github.io/blog/theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="http://jantman.github.io/blog/theme/js/respond.min.js"></script>


</body>
</html>