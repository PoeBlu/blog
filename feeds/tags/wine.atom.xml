<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Jason Antman's Blog - wine</title><link href="http://blog.jasonantman.com/" rel="alternate"></link><link href="http://blog.jasonantman.com/feeds/tags/wine.atom.xml" rel="self"></link><id>http://blog.jasonantman.com/</id><updated>2010-09-05T22:52:00-04:00</updated><entry><title>Getting WoW working on OpenSuSE under Wine</title><link href="http://blog.jasonantman.com/2010/09/getting-wow-working-on-opensuse-under-wine/" rel="alternate"></link><published>2010-09-05T22:52:00-04:00</published><updated>2010-09-05T22:52:00-04:00</updated><author><name>admin</name></author><id>tag:blog.jasonantman.com,2010-09-05:/2010/09/getting-wow-working-on-opensuse-under-wine/</id><summary type="html">&lt;p&gt;Ok, I&amp;#8217;ll admit it, I&amp;#8217;ve been playing
&lt;a href="http://www.worldofwarcraft.com"&gt;WoW&lt;/a&gt;. I&amp;#8217;m not usually the gamer type,
but my girlfriend pressured me into it a bit and, hey, if a woman&amp;#8217;s idea
of quality time is sitting in the same room in front of computers
playing a &lt;a href="http://en.wikipedia.org/wiki/Mmorpg"&gt;&lt;span class="caps"&gt;MMORPG&lt;/span&gt;&lt;/a&gt;, who …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Ok, I&amp;#8217;ll admit it, I&amp;#8217;ve been playing
&lt;a href="http://www.worldofwarcraft.com"&gt;WoW&lt;/a&gt;. I&amp;#8217;m not usually the gamer type,
but my girlfriend pressured me into it a bit and, hey, if a woman&amp;#8217;s idea
of quality time is sitting in the same room in front of computers
playing a &lt;a href="http://en.wikipedia.org/wiki/Mmorpg"&gt;&lt;span class="caps"&gt;MMORPG&lt;/span&gt;&lt;/a&gt;, who am I to
complain? My non-work-hours productivity had suffered quite a bit, but
I&amp;#8217;m not yet at risk of becoming a full-on&amp;nbsp;addict.&lt;/p&gt;
&lt;p&gt;So, for a slight diversion from the usual&amp;nbsp;content&amp;#8230;&lt;/p&gt;
&lt;p&gt;Of course, I&amp;#8217;m not going to run Windows just to play a game, and the
screen on my MacBook Pro is pitifully small compared to the 24&amp;#8221; &lt;span class="caps"&gt;LCD&lt;/span&gt; on
my desktop. So I&amp;#8217;ve been running WoW through
&lt;a href="http://www.winehq.org/"&gt;Wine&lt;/a&gt; on an admittedly out of date
&lt;a href="http://www.opensuse.org/"&gt;OpenSuSE&lt;/a&gt; 11.1 install on my workstation (a
Dell Precision 470 - 2 Gb 400Mhz &lt;span class="caps"&gt;DDR&lt;/span&gt; &lt;span class="caps"&gt;ECC&lt;/span&gt; &lt;span class="caps"&gt;RAM&lt;/span&gt;, 16 Gb swap, dual 2.8GHz
Xeons with &lt;span class="caps"&gt;HT&lt;/span&gt;, 16 &lt;span class="caps"&gt;KB&lt;/span&gt; L1 cache, 1 &lt;span class="caps"&gt;MB&lt;/span&gt; L2 cache, and a pitiful &lt;span class="caps"&gt;ATI&lt;/span&gt; Radeon
3600 &lt;span class="caps"&gt;HD&lt;/span&gt;, and everything in /home (including the game) on a 7200 &lt;span class="caps"&gt;RPM&lt;/span&gt; &lt;span class="caps"&gt;SATA&lt;/span&gt;&amp;nbsp;disk).&lt;/p&gt;
&lt;p&gt;With my recent need to upgrade to Burning Crusade, I hit a few bumps. I
ended up wiping out my entire &lt;code&gt;~/.wine&lt;/code&gt; and starting from scratch with a
fresh install, and having to apply all of the patches (luckily I backed
everything up to another drive so I already had the patches downloaded).
Of course, I backed up the data if import (&lt;code&gt;Interface&lt;/code&gt; and &lt;code&gt;WTF&lt;/code&gt; and WoW
was the only thing I had installed through&amp;nbsp;wine).&lt;/p&gt;
&lt;p&gt;I went through a number of different attempted settings for wine, &lt;span class="caps"&gt;OS&lt;/span&gt;
settings, etc. through the different patches (essentially try a patch,
change settings until it worked, move on to the next). The biggest snag
I hit was every few patches, X would lock up. No keyboard or mouse
input, the caps lock, num lock, etc. keys wouldn&amp;#8217;t respond,
Ctrl+Alt+{Backspace|Delete} wouldn&amp;#8217;t work, &lt;em&gt;but&lt;/em&gt; I still had &lt;span class="caps"&gt;SSH&lt;/span&gt; access,
so I could just kill the &lt;code&gt;Wow.exe&lt;/code&gt; process and try again. Each time this
happened was right after I accepted the second message (&lt;span class="caps"&gt;TOS&lt;/span&gt; or &lt;span class="caps"&gt;EULA&lt;/span&gt;,
whichever comes second)&amp;#8230; the last thing I&amp;#8217;d see in the log&amp;nbsp;is:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;fixme:reg:GetNativeSystemInfo (0x374045c4) using GetSystemInfo()
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;and then it would lock up with Wow.exe using 400% &lt;span class="caps"&gt;CPU&lt;/span&gt; as per &lt;code&gt;top&lt;/code&gt;
(which &lt;em&gt;does&lt;/em&gt; make some sense given dual CPUs with &lt;span class="caps"&gt;HT&lt;/span&gt;). Needless to say,
I have 4 pages of notes detailing the process it took me to get to a
working fully-patched install. I don&amp;#8217;t know if different patches need
different tweaks, and don&amp;#8217;t really feel like transcribing the entire
process. But here&amp;#8217;s the final state of all the things I&amp;nbsp;tweaked.&lt;/p&gt;
&lt;p&gt;I&amp;#8217;m running OpenSuSE 11.1, kernel 2.6.27.45-0.1-default (&lt;span class="caps"&gt;SMP&lt;/span&gt; x86_64),
wine 1.3.1 (1.3.1-1.1 from the OpenSuSE
&lt;a href="http://download.opensuse.org/repositories/Emulators:/Wine/openSUSE_11.1/"&gt;Emulators:/Wine/openSUSE_11.1&lt;/a&gt;
repo) running under WindowMaker&amp;nbsp;0.92.0-204.6.&lt;/p&gt;
&lt;p&gt;If you happen to find this post and give it a shot, please comment if it
worked, or what you did differently. If it will be of help, drop me a
line and I&amp;#8217;ll transcribe and post my entire&amp;nbsp;process.&lt;/p&gt;
&lt;p&gt;First note that I start WoW via a bash script (&lt;code&gt;~/bin/warcraft.sh&lt;/code&gt;) that
sets up my switched mouse buttons in WindowMaker (yeah, I&amp;#8217;m very
left-handed) and also &lt;code&gt;chmod -R&lt;/code&gt;&amp;#8216;s the whole
&lt;code&gt;.wine/drive_c/Program Files/World of Warcraft&lt;/code&gt; 777, which seems to be
required for WoW (and the perms get gronked after patches). The chmod is
a good starting point for&amp;nbsp;troubleshooting.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;winecfg&lt;/code&gt; under &amp;#8220;Libraries&amp;#8221; tab add overrides for &lt;code&gt;msvcr80&lt;/code&gt; and
    &lt;code&gt;wldap32&lt;/code&gt; as &amp;#8220;(native,&amp;nbsp;builtin)&amp;#8221;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;winetricks vcrun2005sp1&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Run warcraft Installer through wine, auto-install Gecko when asked.
    When install finishes, begin&amp;nbsp;patching.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;winetricks fakeie6&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;add &lt;code&gt;SET gxApi "opengl"&lt;/code&gt; to &lt;code&gt;Config.wtf&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;winetricks nt40&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;wine regedit&lt;/code&gt;, create a key HKEY_CURRENT_USER -&gt; Software -&gt;
    Wine -&gt; Direct3D if it doesn&amp;#8217;t exist, create string value
    &amp;#8220;OffscreenRenderingMode&amp;#8221; =&gt; &amp;#8220;backbuffer&amp;#8221;.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;winecfg&lt;/code&gt;, in Graphics tab, check off &amp;#8220;Allow the window manager to
    decorate the windows&amp;#8221; and &amp;#8220;Allow the window manager to control the
    windows&amp;#8221; (fixed my last hang at patch&amp;nbsp;3.3.5-12340)&lt;/li&gt;
&lt;/ol&gt;</content><category term="warcraft"></category><category term="wine"></category><category term="wow"></category></entry></feed>