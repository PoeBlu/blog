<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Jason Antman's Blog - web</title><link href="http://blog.jasonantman.com/" rel="alternate"></link><link href="http://blog.jasonantman.com/feeds/tags/web.atom.xml" rel="self"></link><id>http://blog.jasonantman.com/</id><updated>2010-04-07T10:10:00-04:00</updated><entry><title>Apache catchall vhost</title><link href="http://blog.jasonantman.com/2010/04/apache-catchall-vhost/" rel="alternate"></link><published>2010-04-07T10:10:00-04:00</published><updated>2010-04-07T10:10:00-04:00</updated><author><name>admin</name></author><id>tag:blog.jasonantman.com,2010-04-07:/2010/04/apache-catchall-vhost/</id><summary type="html">&lt;p&gt;As mentioned in &lt;a href="/2010/04/bind9-dynamic-dns/"&gt;one of my recent posts&lt;/a&gt;, I occasionally
have to setup catchall pages in Apache. The general idea is usually that I either want
a vhost that serves one page for any conceivable request, or that I moved something and
want to alert the visitor, but provide a …&lt;/p&gt;</summary><content type="html">&lt;p&gt;As mentioned in &lt;a href="/2010/04/bind9-dynamic-dns/"&gt;one of my recent posts&lt;/a&gt;, I occasionally
have to setup catchall pages in Apache. The general idea is usually that I either want
a vhost that serves one page for any conceivable request, or that I moved something and
want to alert the visitor, but provide a formula-based link to the new content. Assuming
you have &lt;code&gt;mod_rewrite&lt;/code&gt;, this is relatively&amp;nbsp;simple.&lt;/p&gt;
&lt;p&gt;In your vhost configuration (or .htaccess), you just need two&amp;nbsp;lines:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;RewriteEngine&lt;/span&gt; &lt;span class="k"&gt;on&lt;/span&gt;
&lt;span class="nb"&gt;RewriteCond&lt;/span&gt; %{REQUEST_URI} !/index\.php$1
&lt;span class="nb"&gt;RewriteRule&lt;/span&gt; ^(.*)$ &lt;span class="sx"&gt;/index.php&lt;/span&gt;$1 [L]
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;This will redirect every request for the vhost to &lt;code&gt;/index.php&lt;/code&gt;. Within
your &lt;span class="caps"&gt;PHP&lt;/span&gt; script, you can access the actual request &lt;span class="caps"&gt;URI&lt;/span&gt; through &lt;code&gt;$_SERVER["REQUEST_URI"]&lt;/code&gt;.
The script that I&amp;#8217;m currently using for an internal page&amp;nbsp;is:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="x"&gt;$newServer = &amp;quot;http://foo.example.com:12345&amp;quot;;&lt;/span&gt;

&lt;span class="x"&gt;if($_SERVER[&amp;quot;REQUEST_URI&amp;quot;] == &amp;quot;/&amp;quot; || $_SERVER[&amp;quot;REQUEST_URI&amp;quot;] == &amp;quot;/index.php&amp;quot;)&lt;/span&gt;
&lt;span class="x"&gt;  {&lt;/span&gt;
&lt;span class="x"&gt;    header(&amp;quot;Location: &amp;quot;.$newServer);&lt;/span&gt;
&lt;span class="x"&gt;  }&lt;/span&gt;
&lt;span class="x"&gt;else&lt;/span&gt;
&lt;span class="x"&gt;  {&lt;/span&gt;
&lt;span class="x"&gt;    $newURL = $newServer.$_SERVER[&amp;quot;REQUEST_URI&amp;quot;];&lt;/span&gt;
&lt;span class="x"&gt;    echo &amp;#39;&amp;lt;html&amp;gt;&amp;lt;head&amp;gt;&amp;lt;title&amp;gt;Page Moved&amp;lt;/title&amp;gt;&amp;#39;;&lt;/span&gt;
&lt;span class="x"&gt;    echo &amp;#39;&amp;lt;&lt;span class="caps"&gt;META&lt;/span&gt; &lt;span class="caps"&gt;HTTP&lt;/span&gt;-&lt;span class="caps"&gt;EQUIV&lt;/span&gt;=&amp;quot;refresh&amp;quot; &lt;span class="caps"&gt;CONTENT&lt;/span&gt;=&amp;quot;5;&lt;span class="caps"&gt;URL&lt;/span&gt;=&amp;#39;.$newURL.&amp;#39;&amp;quot;&amp;gt;&amp;#39;;&lt;/span&gt;
&lt;span class="x"&gt;    echo &amp;#39;&amp;lt;/head&amp;gt;&amp;lt;body&amp;gt;&amp;#39;;&lt;/span&gt;
&lt;span class="x"&gt;    echo &amp;#39;&amp;lt;p&amp;gt;The page you are looking for is best found at:&amp;lt;/p&amp;gt;&amp;#39;;&lt;/span&gt;
&lt;span class="x"&gt;    echo &amp;#39;&amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;&amp;lt;a href=&amp;quot;&amp;#39;.$newURL.&amp;#39;&amp;quot;&amp;gt;&amp;#39;.$newURL.&amp;#39;&amp;lt;/a&amp;gt;&amp;lt;/strong&amp;gt;&amp;lt;/p&amp;gt;&amp;#39;;&lt;/span&gt;
&lt;span class="x"&gt;    echo &amp;#39;&amp;lt;p&amp;gt;You will be automatically redirected after 5 seconds. If this does not happen, click the link above.&amp;lt;/p&amp;gt;&amp;#39;;&lt;/span&gt;
&lt;span class="x"&gt;    echo &amp;#39;&amp;lt;/body&amp;gt;&amp;lt;/html&amp;gt;&amp;#39;;&lt;/span&gt;
&lt;span class="x"&gt;  }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;This script takes two distinct&amp;nbsp;actions:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;If the requested path is &lt;code&gt;/&lt;/code&gt; or &lt;code&gt;/index.php&lt;/code&gt;, it transparently redirects to a different &lt;span class="caps"&gt;URL&lt;/span&gt; (and&amp;nbsp;port).&lt;/li&gt;
&lt;li&gt;Otherwise, it displays a &amp;#8220;page moved to&amp;#8221; message and uses a Meta-Refresh to redirect after 5&amp;nbsp;seconds.&lt;/li&gt;
&lt;/ol&gt;</content><category term="apache"></category><category term="catchall"></category><category term="PHP"></category><category term="web"></category></entry><entry><title>Please Don’t resize my browser</title><link href="http://blog.jasonantman.com/2009/06/please-dont-resize-my-browser/" rel="alternate"></link><published>2009-06-22T23:48:00-04:00</published><updated>2009-06-22T23:48:00-04:00</updated><author><name>admin</name></author><id>tag:blog.jasonantman.com,2009-06-22:/2009/06/please-dont-resize-my-browser/</id><summary type="html">&lt;p&gt;It always amazes me to see how much &amp;#8220;old school&amp;#8221; web design practice is
still out there. I&amp;#8217;m talking about commercial sites (not MySpace pages)
that blatantly ignore web standards about both content and user
experience. This isn&amp;#8217;t just a Linux thing, though some aspect of it
certainly …&lt;/p&gt;</summary><content type="html">&lt;p&gt;It always amazes me to see how much &amp;#8220;old school&amp;#8221; web design practice is
still out there. I&amp;#8217;m talking about commercial sites (not MySpace pages)
that blatantly ignore web standards about both content and user
experience. This isn&amp;#8217;t just a Linux thing, though some aspect of it
certainly is. The web site of my home town,
&lt;a href="http://www.mpnj.com"&gt;mpnj.com&lt;/a&gt; uses a Flash-based navigation menu that
even the official, proprietary Flash player for Linux won&amp;#8217;t support -
the transparency renders as white, obscuring the text beneath the fully
extended size of the menu. I emailed the developer about this on the
launch day, and was told in no uncertain terms that - despite the fact
that he had a fully-functional alternate version - Linux wasn&amp;#8217;t
important enough to fix the site. Ironically for a town government web
page, it also doesn&amp;#8217;t incorporate any accessibility features, which
seems to be standard for most of these poor&amp;nbsp;designs.&lt;/p&gt;
&lt;p&gt;There are still countless large news sites whose Flash-based video
players won&amp;#8217;t run under Linux, and even CitiBank&amp;#8217;s credit card site has
a flash ad that plays incorrectly under&amp;nbsp;Linux.&lt;/p&gt;
&lt;p&gt;The real pain that I happened to see today was a company who uses
coupons.com to allow customers to print out retail coupons. My first
surprise was that to print the coupons, you have to download Windows or
Mac software. I&amp;#8217;m not quite sure how many people will do this, but it&amp;#8217;s
probably how viruses spread so quickly (people who will download
anything that claims to get them half a dollar off of a roll of toilet
paper, or whatever the coupons are for). So, that&amp;#8217;s not cool - most
coupons I&amp;#8217;ve gotten were just &lt;span class="caps"&gt;HTML&lt;/span&gt; emails or PDFs. If their thinking is
to control the distribution (they make some comment about a &amp;#8220;paper-based
printer, not a fax or &lt;span class="caps"&gt;PDF&lt;/span&gt; creator&amp;#8221;), they&amp;#8217;ve obviously forgotten about
photocopy machines and scanners, let alone capturing the spool file on&amp;nbsp;Mac.&lt;/p&gt;
&lt;p&gt;More striking, however, was the shock of opening their help page. My
primary monitor is a 24&amp;#8221; widescreen, and I generally keep a browser
window occupying half the screen width and a terminal next to it. Once I
opened their &amp;#8220;help&amp;#8221; site, it promptly resized my browser window to a
tiny&amp;nbsp;640x480!&lt;/p&gt;
&lt;p&gt;This problem, unfortunately, isn&amp;#8217;t as rare as it should be. There are
still sites that force browser size, disable right clicks (I hadn&amp;#8217;t seen
that since about 2004 until a few weeks ago&amp;#8230; obviously someone who&amp;#8217;s
never used `wget`) or have a page that doesn&amp;#8217;t fully work in FireFox
on any platform. Even worse, my personal pet peeve (as at the time of
writing this I have about 50+ tabs open in Firefox, and it&amp;#8217;s only using
a small sliver of my &lt;span class="caps"&gt;2GB&lt;/span&gt; &lt;span class="caps"&gt;RAM&lt;/span&gt;) is sites that don&amp;#8217;t play well with tabbed
browsing - either using only JavaScript for &lt;em&gt;all&lt;/em&gt; navigation links, or
opening all links (site-wide) in the same tab/window. I don&amp;#8217;t know how
many web sites have lost my business because of this. Or the one I know
of that starts a new shopping cart for every tab opened (so if I open
each product I want to buy in a new tab, when I add them all to the
cart, it ends up with only&amp;nbsp;one).&lt;/p&gt;
&lt;p&gt;I don&amp;#8217;t know how there can be anyone out there who&amp;#8217;s still not using
valid &lt;span class="caps"&gt;XHTML&lt;/span&gt; with all of the accessibility features for anything new,
especially a commercial site. But even more so, how can there still be
people designing web sites who disregard the golden rule of web design:
&lt;strong&gt;Don&amp;#8217;t mess with someone&amp;#8217;s browser.&lt;/strong&gt; Leave things like where to open
the link and how big to make the browser to the user. If they&amp;#8217;re not
technically literate, changing what &amp;#8220;usually happens&amp;#8221; will just confuse
them. If they&amp;#8217;re well-versed in how to use a web browser, like me,
they&amp;#8217;ll just get aggravated by having someone else change their workflow
(I doubt the guys who designed those sites would like it if I told them
they had to design the whole thing in Emacs). If they&amp;#8217;re somewhere in
the middle (just found Ctrl+click in Firefox), you&amp;#8217;ll confuse them. And
God forbid they&amp;#8217;re blind and using a page reader&amp;#8230; good luck with
JavaScript or Flash&amp;nbsp;navigation.&lt;/p&gt;</content><category term="design"></category><category term="standards"></category><category term="web"></category></entry></feed>