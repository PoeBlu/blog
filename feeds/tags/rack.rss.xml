<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Jason Antman's Blog</title><link>http://newblog.jasonantman.com/</link><description></description><atom:link href="http://newblog.jasonantman.com/feeds/tags/rack.rss.xml" rel="self"></atom:link><lastBuildDate>Tue, 27 Sep 2011 19:35:00 -0400</lastBuildDate><item><title>New server, and looking for work</title><link>http://newblog.jasonantman.com/2011/09/new-server-and-looking-for-work/</link><description>&lt;p&gt;First off, I&amp;#8217;ve moved this blog from a server in my basement to
&lt;a href="http://www.linode.com"&gt;Linode&lt;/a&gt; virtual hosting, in preparation for my
move from New Jersey to an apartment in Georgia. This will mark the
first time since 2001 (when I was 14) that I didn&amp;#8217;t have at least a
publicly-accessible Linux server in my home. It also means that, as sad
as it is, the rack will probably all be either going in Ebay or to scrap
(after a good &lt;a href="http://en.wikipedia.org/wiki/Gutmann_method"&gt;Guttmann
wipe&lt;/a&gt;, of&amp;nbsp;course).&lt;/p&gt;
&lt;p&gt;&lt;img alt="server rack" src="/GFX/rack_2011-09-27_small.jpg" /&gt;&lt;/p&gt;
&lt;p&gt;I&amp;#8217;m a bit sad to give up hosting &lt;span class="caps"&gt;DNS&lt;/span&gt; myself and having my beautiful
per-zone, per-domain, hourly &lt;span class="caps"&gt;DNS&lt;/span&gt; statistics, but that was my first move,
and Linode&amp;#8217;s web-based &lt;span class="caps"&gt;DNS&lt;/span&gt; manager is much nicer than my collection of
&lt;span class="caps"&gt;PHP&lt;/span&gt; scripts, MySQL backend, and rndc reload wrapper (and I no longer
need &lt;span class="caps"&gt;BIND&lt;/span&gt; split-horizon since the hosting is remote). Mail was next, and
I&amp;#8217;ve got one web server moved and the other on the way. The biggest
disappointment is losing my testbed for all the fun stuff I can&amp;#8217;t do (or
doesn&amp;#8217;t make sense) with a virtualized hosting provider -
&lt;a href="http://puppetlabs.com/"&gt;Puppet&lt;/a&gt;, real &lt;span class="caps"&gt;ISC&lt;/span&gt; &lt;span class="caps"&gt;DHCP&lt;/span&gt;, &lt;span class="caps"&gt;BIND9&lt;/span&gt;, Cisco CatOS and
&lt;span class="caps"&gt;IOS&lt;/span&gt; devices, &lt;a href="http://www.bacula.org"&gt;Bacula&lt;/a&gt;, running my own edge
router, etc. There&amp;#8217;s at least a handful of current production Rutgers
services and tools that got their start here as projects in my spare
time. But I&amp;#8217;m sure I&amp;#8217;ll make up somehow, and I&amp;#8217;m planning on putting
aside some money for a massive new desktop to run a slew of&amp;nbsp;VMs.&lt;/p&gt;
&lt;p&gt;On a second note, the one thing holding back my move to Georgia is,
well, my lack of a job there. I&amp;#8217;m really just starting to look around,
and am very much hoping to find something comparable to my current
position at Rutgers - a group supporting diverse services, doing mainly
architecture and implementation of new services, a good dose of
automation and custom tool development, and hopefully also some work
with performance and availability monitoring (think
&lt;a href="http://www.nagios.org"&gt;Nagios&lt;/a&gt; and &lt;a href="http://www.cacti.net/"&gt;Cacti&lt;/a&gt;),
logging, etc. And, of course, something that&amp;#8217;s network-focused, whether
wireless or wired. Maintaining some data center space/physical
infrastructure and occasionally working with my hands is fun too. So, if
you know anyone who&amp;#8217;s hiring a Linux/open source dude in the general
vicinity of Athens, &lt;span class="caps"&gt;GA&lt;/span&gt; (including Atlanta and the surrounding area),
please give me a heads-up, or pass them along to
&lt;a href="http://resume.jasonantman.com"&gt;resume.jasonantman.com&lt;/a&gt;.&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">admin</dc:creator><pubDate>Tue, 27 Sep 2011 19:35:00 -0400</pubDate><guid>tag:newblog.jasonantman.com,2011-09-27:2011/09/new-server-and-looking-for-work/</guid><category>linode</category><category>move</category><category>rack</category><category>servers</category></item><item><title>Many Many Changes; Downtime</title><link>http://newblog.jasonantman.com/2009/03/many-many-changes/</link><description>&lt;p&gt;Well, I don&amp;#8217;t have time to go into a lot of detail, but I thought I&amp;#8217;d
give a recap of what&amp;#8217;s going on. I went down to Mount Holly, &lt;span class="caps"&gt;NJ&lt;/span&gt;
yestserday morning - about a 2-/12 hour drive each way, and picked up a
41U rack for the basement. Pretty damn heavy, took me two hours to
disassemble it, wrangle it down the stairs, and get it back together.
It&amp;#8217;s an old round-hole rack, which didn&amp;#8217;t seem to matter much until I
found that the tabs of the Dell Rapid Rails are just a bit too big to
fit in it, so neither my rack &lt;span class="caps"&gt;KMM&lt;/span&gt; nor the rails for my mail server will
fit. A bigger problem, though, is that the guy told me it was the
standard &lt;span class="caps"&gt;HP&lt;/span&gt; 29&amp;#8221; deep, and I found it to be 28-1/4&amp;#8221; deep when I started
racking things up. So, though I just spent $200 on rails for old
Proliants, they&amp;#8217;re all about 1/2&amp;#8221; too long to&amp;nbsp;fit.&lt;/p&gt;
&lt;p&gt;Yesterday, I also had Cablevision show up to install the new Optimum
Business with 5 static&amp;nbsp;IPs.&lt;/p&gt;
&lt;p&gt;So, last night around 9:00, I started the arduous task of (for the first
time ever) powering down &lt;span class="caps"&gt;ALL&lt;/span&gt; of my machines, moving them to the new
rack, and re-cabling. That took about 2-1/2 hours, after which my intent
was to bring up the new Optimum connection, configure the Vyatta router,
and roll over mail and web. From what I&amp;#8217;d read of the Vyatta docs it
seemed a relatively straightforward task, and being the stubborn jackass
that I am, I decied, &amp;#8220;hey, it&amp;#8217;s my personal site, it&amp;#8217;s low traffic, and
I want it up before I go to sleep. I&amp;#8217;ll roll over &lt;span class="caps"&gt;DNS&lt;/span&gt; &lt;em&gt;before&lt;/em&gt; I bring
everything&amp;nbsp;up.&amp;#8221;&lt;/p&gt;
&lt;p&gt;That was a &lt;strong&gt;very bad idea&lt;/strong&gt;. Vyatta isn&amp;#8217;t nearly as
simple as it seems - especially for someone who isn&amp;#8217;t really a network
(or at least router/firewall) guy. When they say Enterprise, they mean
robust. They also mean that week-long bootcamps aren&amp;#8217;t for naught. It
took me about half an hour to figure out that even if no &amp;#8220;firewall&amp;#8221;
ruleset is associated with an interface, it still has an implicit drop
all. And if you only want to firewall what&amp;#8217;s coming in from the outside
world, and let everything out, you need to add explicit allow all rules
to the in and out sides of the &lt;span class="caps"&gt;LAN&lt;/span&gt; inteface and the out side of the &lt;span class="caps"&gt;WAN&lt;/span&gt;&amp;nbsp;interface.&lt;/p&gt;
&lt;p&gt;To top all this off, I had some serious still-unexplained &lt;span class="caps"&gt;DHCP&lt;/span&gt; problems
on the &lt;span class="caps"&gt;LAN&lt;/span&gt;, a serious issue since I just set all my hosts to &lt;span class="caps"&gt;DHCP&lt;/span&gt; (which
I&amp;#8217;ll probably undo soon). So, Yesterday was network work from 7:30 &lt;span class="caps"&gt;AM&lt;/span&gt; to
3 &lt;span class="caps"&gt;AM&lt;/span&gt; today (including driving to pickup the rack). By the time 3 &lt;span class="caps"&gt;AM&lt;/span&gt;
rolled around, I was quite unhappy that I decided to roll over &lt;span class="caps"&gt;DNS&lt;/span&gt; in
order to force myself to get things working, as I ended up going back to
FiOS for client access only. Today started around 10 &lt;span class="caps"&gt;AM&lt;/span&gt;, and here I am -
6:30 &lt;span class="caps"&gt;PM&lt;/span&gt;, and I just got things working partially right. I have mail
working - arguably the most important - for jasonantman.com only, though
I have yet to setup any&amp;nbsp;aliases.&lt;/p&gt;
&lt;p&gt;On the web side, I&amp;#8217;m working to setup name-based vhosts for all of the
subdomains, but for some reason, blog is showing up for everything.
Luckily it works right. So we&amp;#8217;ll&amp;nbsp;see&amp;#8230;.&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">admin</dc:creator><pubDate>Sat, 07 Mar 2009 19:05:00 -0500</pubDate><guid>tag:newblog.jasonantman.com,2009-03-07:2009/03/many-many-changes/</guid><category>firewall</category><category>optimum</category><category>rack</category><category>router</category><category>wan</category></item><item><title>Cable Management, Power Measurements, Major Outage, Cacti</title><link>http://newblog.jasonantman.com/2008/03/cable-management-power-measurements-major-outage-cacti/</link><description>&lt;p&gt;So, once again, still really busy. But a few new&amp;nbsp;things.&lt;/p&gt;
&lt;p&gt;First, my racks both at home and at the apartment are atrocious. They
have no cable management at all. Both started with 1-3 machines, and no
real plans for upgrades (since they&amp;#8217;re just my personal/development
machines). Unfortunately, the &amp;#8220;rack&amp;#8221; (a metal workshop shelving unit) at
home now has 8 machines and a host of ancillary equipment. The one at
the apartment - an actual 42U rack - has 5 plus a few switches,
rackmount &lt;span class="caps"&gt;KMM&lt;/span&gt;, etc. They&amp;#8217;re both a jumble of wires in the back.
Unfortunately, it seems like cable management hardware is *epxensive*.
$30 for a 2U metal blank with a few plastic split D-rings, or almost $40
for a 2-meter vertical hunk of plastic channel with slits in the sides?
So, I&amp;#8217;ve been vaguely considering what it will take to fabricate some
cable management hardware of my own. Probably just building something
out of rack blanks for the horizontal off of the switches, and buying
some sort of vertical channel for power and networking/&lt;span class="caps"&gt;KVM&lt;/span&gt;. Man, those
&lt;span class="caps"&gt;KVM&lt;/span&gt; cables sure do take up a lot of space. Also at the moment, at home
my power is all coming directly out of two UPSs, whereas at the
apartment it&amp;#8217;s straight from mains off of a surge suppressor. I&amp;#8217;s like
to buy another &lt;span class="caps"&gt;UPS&lt;/span&gt; for the apartment from RefurbUPS.com, where I got the
ones from home, and also add a &lt;span class="caps"&gt;PDU&lt;/span&gt; at home and a vertical power strip at
the&amp;nbsp;apartment.&lt;/p&gt;
&lt;p&gt;Also, at the apartment, the roommates and I have had some discussion
lately about how much power the machines draw. This mainly stemmed from
our plans to move this June, into a rented house with two more people.
This seems to be falling through, so I don&amp;#8217;t have to worry about moving
and re-cabling everything, but I&amp;#8217;m still interested in finding out how
much power is being drawn. Granted, my UPSs at home give me a
more-or-less good idea of power consumption, but I&amp;#8217;d like to know in
detail. The ideal solution would be a clamp ammeter around the mains
line to the equipment - one with a serial interface. Unfortunately, I
can&amp;#8217;t seem to find such a thing, short of a digital multimeter left on
all the time. So, I guess I&amp;#8217;ll be looking around, and if I can&amp;#8217;t find
anything specific, maybe I&amp;#8217;ll work on a microcontroller that can read
1-200mV in 1mV increments, and use it with an inductive clamp ammeter
(usual output for them is 1mV per&amp;nbsp;A).&lt;/p&gt;
&lt;p&gt;So, on Monday I got into work and couldn&amp;#8217;t access my mailserver. Weird.
I never even got any Nagios alerts. I checked Nagios and&amp;#8230; nothing. As
in no connection. I &lt;span class="caps"&gt;SSH&lt;/span&gt;&amp;#8217;d home and pinged both boxes, but nothing. The
switch showed the mail server totally offline, and the Nagios box
plugged connected but &lt;span class="caps"&gt;ZERO&lt;/span&gt; data out. I reset the counters and waited.
Still nothing. After an hour or so of poking around, I determined that
both devices were on the same 6-port group on the switch, and nothing
else there was up too. So, after five long hours, I got someone back
home to switch the cables. Still nothing. On a hunch, I asked to have
her check the mail server (the &amp;#8220;new&amp;#8221; Sun Blade 150) and, sure enough, it
wasn&amp;#8217;t powered on. A click of the power button, and the mail server was
back online. Along with an ominous last email from Nagios, stating that
the &lt;span class="caps"&gt;UPS&lt;/span&gt; running my switch lost power, and 6 minutes later, was going
down hard. Then&amp;nbsp;quiet.&lt;/p&gt;
&lt;p&gt;I don&amp;#8217;t usually have power outages. So I&amp;#8217;ll admit, when I added some of
the new machines, I committed a high sin - I &amp;#8220;never got around&amp;#8221; to
setting up everything power-wise. I also have the switch running off of
an old BackUPS &lt;span class="caps"&gt;500VA&lt;/span&gt; unit, &lt;span class="caps"&gt;USB&lt;/span&gt;, without automatic self-tests. As a
result of all&amp;nbsp;this:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;The little &lt;span class="caps"&gt;UPS&lt;/span&gt; powering the switch only held out for 6-7 minutes. As
    a result, once that died, the bigger units didn&amp;#8217;t even matter, as
    all hope was lost. This needs to be on a bigger &lt;span class="caps"&gt;UPS&lt;/span&gt; - maybe one of
    the &lt;span class="caps"&gt;1000VA&lt;/span&gt;&amp;#8217;s until it gets its&amp;#8217;&amp;nbsp;own.&lt;/li&gt;
&lt;li&gt;APCupsd requires a network to initiate shutdown, so the rest of the
    machines came down hard (as confirmed by looking through log&amp;nbsp;files).&lt;/li&gt;
&lt;li&gt;The SunBlade was never setup to power on after power interruption,
    so it just sat there like a&amp;nbsp;brick.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Most disturbingly, while my Nagios/monitoring box is up (according to
the switch, power draw figures from the &lt;span class="caps"&gt;UPS&lt;/span&gt;, and the lights, as
confirmed by someone on-site), it&amp;#8217;s dead. No ping, nothing out. I&amp;#8217;ll
have to look into it, but it made me realize that this really is my only
way of analyzing problems. That needs to&amp;nbsp;stop.&lt;/p&gt;
&lt;p&gt;Maybe one day I&amp;#8217;ll have the money for a nice &lt;a href="http://www.apc.com/products/family/index.cfm?id=223"&gt;SmartUPS
&lt;span class="caps"&gt;RT&lt;/span&gt;&lt;/a&gt; or even a
&lt;a href="http://www.apc.com/products/family/index.cfm?id=189"&gt;Symmetra&lt;/a&gt; - though
getting 208V into my basement is even more of a dream than spending
$4000 on a&amp;nbsp;&lt;span class="caps"&gt;UPS&lt;/span&gt;.&lt;/p&gt;
&lt;p&gt;Also, I decided (after all this) to setup graphing of &lt;span class="caps"&gt;UPS&lt;/span&gt; data (load,
voltage in and out, temp, capacity, run time, etc.). While I haven&amp;#8217;t
gotten around to setting up &lt;a href="http://www.zenoss.com/"&gt;Zenoss&lt;/a&gt; yet, I did
a quick (well, 4 hours later I&amp;#8217;m done configuring it)
&lt;a href="http://www.cacti.net/"&gt;Cacti&lt;/a&gt;installation on my web server (I should
already have it running on the monitoring box, but who knows what that
will look like when I get&amp;nbsp;home).&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">admin</dc:creator><pubDate>Thu, 06 Mar 2008 01:02:00 -0500</pubDate><guid>tag:newblog.jasonantman.com,2008-03-06:2008/03/cable-management-power-measurements-major-outage-cacti/</guid><category>apc</category><category>cable management</category><category>cacti</category><category>disaster</category><category>monitoring</category><category>power distribution</category><category>power failure</category><category>rack</category><category>UPS</category></item></channel></rss>