<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Jason Antman's Blog</title><link href="http://newblog.jasonantman.com/" rel="alternate"></link><link href="http://newblog.jasonantman.com/feeds/tags/xml.atom.xml" rel="self"></link><id>http://newblog.jasonantman.com/</id><updated>2010-02-21T22:42:00-05:00</updated><entry><title>Parsing Nagios status.dat in PHP</title><link href="http://newblog.jasonantman.com/2010/02/parsing-nagios-status-dat-in-php/" rel="alternate"></link><updated>2010-02-21T22:42:00-05:00</updated><author><name>admin</name></author><id>tag:newblog.jasonantman.com,2010-02-21:2010/02/parsing-nagios-status-dat-in-php/</id><summary type="html">&lt;p&gt;&lt;strong&gt;If you&amp;#8217;re just looking for the script or &lt;span class="caps"&gt;PHP&lt;/span&gt; module&lt;/strong&gt;, you can get
them at:
&lt;a href="http://github.com/jantman/php-nagios-xml"&gt;http://github.com/jantman/php-nagios-xml&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;A while ago (back in late 2008), I wrote a &lt;span class="caps"&gt;PHP&lt;/span&gt; script that parses the
Nagios status.dat file into an associative array. My original use was to
output &lt;span class="caps"&gt;XML&lt;/span&gt; which was then read by another script on another server and
used for a small custom &lt;span class="caps"&gt;GUI&lt;/span&gt;. It&amp;#8217;s a very simple &lt;span class="caps"&gt;PHP&lt;/span&gt; script that just
takes the path of the status.dat file (which, obviously, must be
readable by the user running the&amp;nbsp;script).&lt;/p&gt;
&lt;p&gt;At that time, I was using Nagios v2. Since then, I&amp;#8217;ve moved to Nagios
v3, and have updated the script to include the ability to parse v3
status.dat files, as well as a function to detect the version of a
status file. I also refactored the code so that the parsing functions
are all contained in a single file (statusXML.php.inc) which is safe to
include in other scripts. The actual statusXML.php file now just
includes examples of how to call all of the functions and output &lt;span class="caps"&gt;XML&lt;/span&gt;
(though it is equally useful to output the serialized array, or use it&amp;nbsp;directly).&lt;/p&gt;
&lt;p&gt;Since I posted my script online, two people have been kind enough to
send back their&amp;nbsp;modifications:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://www.krzywanski.net/"&gt;Artur Krzywański&lt;/a&gt; modified the original
    (&lt;a href="https://github.com/jantman/php-nagios-xml/blob/9926602ef4868a898661b6ea0f430ff8ccba4dd3/parseNagiosXML.php"&gt;r4&lt;/a&gt;)
    version of
    &lt;a href="https://github.com/jantman/php-nagios-xml/blob/master/statusXML.php"&gt;statusXML.php&lt;/a&gt;
    to allow selection of the keys to be&amp;nbsp;returned.&lt;/li&gt;
&lt;li&gt;Whitham D. Reeve &lt;span class="caps"&gt;II&lt;/span&gt; of &lt;a href="http://www.gci.com"&gt;General Communication,
    Inc.&lt;/a&gt;, who needed higher performance for a very
    large status file, rewrote my script in C as a &lt;span class="caps"&gt;PHP&lt;/span&gt;&amp;nbsp;module.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Both of these generous contributions have been included in my &lt;a href="https://github.com/jantman/php-nagios-xml"&gt;Github
repository&lt;/a&gt; as of the current
commit. Unfortunately, due to my delay in putting my Nagios3 code into
svn, both of these contributions are &lt;strong&gt;Nagios v2&lt;/strong&gt;&amp;nbsp;only.&lt;/p&gt;
&lt;p&gt;As time permits, I plan on merging Artur&amp;#8217;s changes into the current
version of statusXML.php.inc. Unfortunately, C isn&amp;#8217;t one of my strong
points, but I plan on also updating Whitham&amp;#8217;s &lt;span class="caps"&gt;PHP&lt;/span&gt; module code to work
with Nagios3 as soon as&amp;nbsp;possible.&lt;/p&gt;
&lt;p&gt;Stay tuned for updates, and thanks to both gentlemen for contributing
their work. I&amp;#8217;m always interested in hearing how people are using my
code, and how they are making it&amp;nbsp;better.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Also:&lt;/strong&gt; While I added this project to &lt;a href="http://exchange.nagios.org/"&gt;Nagios
Exchange&lt;/a&gt;, and plan on adding it to
&lt;a href="http://www.monitoringexchange.org/"&gt;Monitoring Exchange&lt;/a&gt;, I don&amp;#8217;t
always keep those sites up to date (I can&amp;#8217;t access Nagios Exchange right
now, and who knows if I&amp;#8217;ll have time to update it tomorrow). I
&lt;em&gt;strongly&lt;/em&gt; recommend directly checking out from Git at
&lt;a href="https://github.com/jantman/php-nagios-xml"&gt;https://github.com/jantman/php-nagios-xml&lt;/a&gt;.&lt;/p&gt;</summary><category term="Nagios"></category><category term="PHP"></category><category term="xml"></category></entry></feed>