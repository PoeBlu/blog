<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Jason Antman's Blog</title><link>http://newblog.jasonantman.com/</link><description></description><atom:link href="http://newblog.jasonantman.com/feeds/tags/1wire.rss.xml" rel="self"></atom:link><lastBuildDate>Wed, 04 Jun 2008 10:34:00 -0400</lastBuildDate><item><title>NewÂ Project</title><link>http://newblog.jasonantman.com/2008/06/new-project/</link><description>&lt;p&gt;Well, TuxTruck has been temporarily put on the back burner. I priced out
the hardware, and it looks like a minimum of $1000, more like $1000 if I
get what I had originally wanted. This is complicated by the fact that
my roommates and I were just hit with a $220 electric bill. Mostly,
that&amp;#8217;s due to the central air conditioning in our apartment, and the
horrible inefficiencies with&amp;nbsp;it.&lt;/p&gt;
&lt;p&gt;Inefficient? Yes. At the moment, I&amp;#8217;m the only person in the apartment.
I&amp;#8217;m home for the weekend from 18:00 Friday through about 15:00 Monday. I
have class Monday-Thursday night 18:00-21:45. I work Tuesday-Friday
0900-1700. Even though the thermostat we have is &amp;#8220;programmable&amp;#8221;, it can
only be set for 4 time periods per day, weekdays and weekends. So, I
figured that a little added efficiency in calculating when the A/C
should run would go a long way towards energy&amp;nbsp;savings.&lt;/p&gt;
&lt;p&gt;My idea - tuxOstat - is to have a Linux box that has temperature sensors
placed around the apartment, and a bank of relays to control the
heating/cooling systems. So, even though I only got the idea last
Thursday, version 1 should be up and running next&amp;nbsp;week.&lt;/p&gt;
&lt;p&gt;In terms of&amp;nbsp;hardware:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Originally I had planned on using a &lt;a href="http://www.soekris.com/net4526.htm"&gt;Soekris
    net4526&lt;/a&gt; that I had lying
    around. However, the added cost of a MiniPCI &lt;span class="caps"&gt;USB&lt;/span&gt; card seemed
    prohibitive for a one-off project. Instead, I&amp;#8217;m using an old &lt;span class="caps"&gt;HP&lt;/span&gt;
    OmniBook laptop that was already lying behind my servers. It&amp;#8217;s
    running Debian&amp;nbsp;4.0.&lt;/li&gt;
&lt;li&gt;I&amp;#8217;ve ordered (just 15 minutes ago) a &lt;a href="http://www.phidgets.com/products.php?product_id=1014"&gt;Phidgets InterfaceKit
    0/0/4&lt;/a&gt;, which
    connects via &lt;span class="caps"&gt;USB&lt;/span&gt; and provides 4 relays. One will control the fan,
    one for the A/C compressor, one for the heat, and one unused (for&amp;nbsp;now).&lt;/li&gt;
&lt;li&gt;I already had a
    &lt;a href="http://www.hobby-boards.com/catalog/product_info.php?cPath=23&amp;amp;products_id=1503"&gt;&lt;span class="caps"&gt;DS9490&lt;/span&gt;&lt;/a&gt;
    Dallas 1-wire &lt;span class="caps"&gt;USB&lt;/span&gt; adapter from
    &lt;a href="http://www.hobby-boards.com/"&gt;Hobby-Boards.com&lt;/a&gt; along with five
    &lt;a href="http://www.hobby-boards.com/catalog/product_info.php?products_id=93"&gt;&lt;span class="caps"&gt;DS18S20P&lt;/span&gt;&lt;/a&gt;
    1-wire parasite power temperature sensors. I&amp;#8217;ve wired those up with
    one in the living room near the existing thermostat, one in my
    bedroom, and one stuck about five feet up one of the A/C conduits,
    to sense when the system is actually putting out cold air. I&amp;#8217;ve had
    them logging to MySQL since 0200&amp;nbsp;today.&lt;/li&gt;
&lt;li&gt;I decided to bite the bullet and order a beautiful &lt;a href="http://www.crystalfontz.com/products/635xes/index.html"&gt;CrystalFontz
    &lt;span class="caps"&gt;XES635BK&lt;/span&gt;-&lt;span class="caps"&gt;TMF&lt;/span&gt;-&lt;span class="caps"&gt;KU&lt;/span&gt;&lt;/a&gt;
    for the physical interface. It&amp;#8217;s a little backlit &lt;span class="caps"&gt;LCD&lt;/span&gt; display, in a
    surface-mount box, along with four bi-color LEDs and a 6-button
    keypad. That should handle the interface for anyone who doesn&amp;#8217;t want
    to grab a&amp;nbsp;console.&lt;/li&gt;
&lt;li&gt;I&amp;#8217;ll be looking for a eight-pin header so that the relays will plug
    right in to the screw-terminal block that the thermostat uses, to
    make for easy switching to the original thermostat if needed (or
    when moving out in a&amp;nbsp;year).&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Now, in terms of&amp;nbsp;software:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;A Python text-based configuration/administration program. Will be
    accessed via &lt;span class="caps"&gt;SSH&lt;/span&gt; or &lt;span class="caps"&gt;KVM&lt;/span&gt; for the actual&amp;nbsp;machine.&lt;/li&gt;
&lt;li&gt;Lots of state data stored in files under&amp;nbsp;/var.&lt;/li&gt;
&lt;li&gt;A python script, run via cron every 2 minutes, that checks
    temperatures from the 1-wire bus, logs them to MySQL (on a remote
    host) and updates the temperature files in&amp;nbsp;/var.&lt;/li&gt;
&lt;li&gt;A master control script, run via cron every minute, that looks at
    the temperatures, the current system state, any manual overrides
    that exist, and decides what relays should be on or&amp;nbsp;off.&lt;/li&gt;
&lt;li&gt;A daemon to handle relay&amp;nbsp;control.&lt;/li&gt;
&lt;li&gt;A daemon to handle the &lt;span class="caps"&gt;LCD&lt;/span&gt; display output and keypad input
    (including immediate manual&amp;nbsp;overrides).&lt;/li&gt;
&lt;li&gt;A method of providing overrides of the programmed schedule on a
    single-instance basis, i.e. &amp;#8220;system completely off from 2008-06-06
    18:00 to 2008-06-08&amp;nbsp;15:00&amp;#8221;.&lt;/li&gt;
&lt;/ol&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">admin</dc:creator><pubDate>Wed, 04 Jun 2008 10:34:00 -0400</pubDate><guid>tag:newblog.jasonantman.com,2008-06-04:2008/06/new-project/</guid><category>1wire</category><category>automation</category><category>home control</category><category>linux</category><category>thermostat</category></item></channel></rss>